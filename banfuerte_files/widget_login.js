var isIE=-1!=navigator.appVersion.indexOf("MSIE"),isWin=-1!=navigator.appVersion.toLowerCase().indexOf("win"),isOpera=-1!=navigator.userAgent.indexOf("Opera");function ControlVersion(){var n,e;try{n=(e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7")).GetVariable("$version")}catch(e){}if(!n)try{e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6"),n="WIN 6,0,21,0",e.AllowScriptAccess="always",n=e.GetVariable("$version")}catch(e){}if(!n)try{n=(e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.3")).GetVariable("$version")}catch(e){}if(!n)try{e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.3"),n="WIN 3,0,18,0"}catch(e){}if(!n)try{e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),n="WIN 2,0,0,11"}catch(e){n=-1}return n}function GetSwfVer(){var e=-1;if(null!=navigator.plugins&&0<navigator.plugins.length){if(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]){var n=navigator.plugins["Shockwave Flash 2.0"]?" 2.0":"",t=navigator.plugins["Shockwave Flash"+n].description.split(" "),o=t[2].split("."),i=o[0],a=o[1],r=t[3];""==r&&(r=t[4]),"d"==r[0]?r=r.substring(1):"r"==r[0]&&0<(r=r.substring(1)).indexOf("d")&&(r=r.substring(0,r.indexOf("d")));e=i+"."+a+"."+r}}else-1!=navigator.userAgent.toLowerCase().indexOf("webtv/2.6")?e=4:-1!=navigator.userAgent.toLowerCase().indexOf("webtv/2.5")?e=3:-1!=navigator.userAgent.toLowerCase().indexOf("webtv")?e=2:isIE&&isWin&&!isOpera&&(e=ControlVersion());return e}function DetectFlashVer(e,n,t){if(versionStr=GetSwfVer(),-1==versionStr)return!1;if(0!=versionStr){versionArray=isIE&&isWin&&!isOpera?(tempArray=versionStr.split(" "),tempString=tempArray[1],tempString.split(",")):versionStr.split(".");var o=versionArray[0],i=versionArray[1],a=versionArray[2];if(o>parseFloat(e))return!0;if(o==parseFloat(e)){if(i>parseFloat(n))return!0;if(i==parseFloat(n)&&a>=parseFloat(t))return!0}return!1}}function AC_AddExtension(e,n){return-1!=e.indexOf("?")?e.replace(/\?/,n+"?"):e+n}function AC_Generateobj(e,n,t){var o="";if(isIE&&isWin&&!isOpera){for(var i in o+="<object ",e)o+=i+'="'+e[i]+'" ';for(var i in n)o+='><param name="'+i+'" value="'+n[i]+'" /> ';o+="></object>"}else{for(var i in o+="<embed ",t)o+=i+'="'+t[i]+'" ';o+="> </embed>"}document.write(o)}function AC_FL_RunContent(){var e=AC_GetArgs(arguments,".swf","movie","clsid:d27cdb6e-ae6d-11cf-96b8-444553540000","application/x-shockwave-flash");AC_Generateobj(e.objAttrs,e.params,e.embedAttrs)}function AC_GetArgs(e,n,t,o,i){var a=new Object;a.embedAttrs=new Object,a.params=new Object,a.objAttrs=new Object;for(var r=0;r<e.length;r+=2){switch(e[r].toLowerCase()){case"classid":break;case"pluginspage":a.embedAttrs[e[r]]=e[r+1];break;case"src":case"movie":e[r+1]=AC_AddExtension(e[r+1],n),a.embedAttrs.src=e[r+1],a.params[t]=e[r+1];break;case"onafterupdate":case"onbeforeupdate":case"onblur":case"oncellchange":case"onclick":case"ondblClick":case"ondrag":case"ondragend":case"ondragenter":case"ondragleave":case"ondragover":case"ondrop":case"onfinish":case"onfocus":case"onhelp":case"onmousedown":case"onmouseup":case"onmouseover":case"onmousemove":case"onmouseout":case"onkeypress":case"onkeydown":case"onkeyup":case"onload":case"onlosecapture":case"onpropertychange":case"onreadystatechange":case"onrowsdelete":case"onrowenter":case"onrowexit":case"onrowsinserted":case"onstart":case"onscroll":case"onbeforeeditfocus":case"onactivate":case"onbeforedeactivate":case"ondeactivate":case"type":case"codebase":a.objAttrs[e[r]]=e[r+1];break;case"id":case"width":case"height":case"align":case"vspace":case"hspace":case"class":case"title":case"accesskey":case"name":case"tabindex":a.embedAttrs[e[r]]=a.objAttrs[e[r]]=e[r+1];break;default:a.embedAttrs[e[r]]=a.params[e[r]]=e[r+1]}}return a.objAttrs.classid=o,i&&(a.embedAttrs.type=i),a}var Hashtable=function(o){var c="function",t="string";if("undefined"==typeof encodeURIComponent||Array.prototype.splice===o||Object.prototype.hasOwnProperty===o)return null;function i(e){return typeof e==t?e:""+e}function a(e){var n;return typeof e==t?e:typeof e.hashCode==c?typeof(n=e.hashCode())==t?n:a(n):i(e)}function n(e,n){return e.equals(n)}function r(e,n){return typeof n.equals==c?n.equals(e):e===n}function e(n){return function(e){if(null===e)throw new Error("null is not a valid "+n);if(e===o)throw new Error(n+" must not be undefined")}}var d=e("key"),p=e("value");function g(e,n,t,o){this[0]=e,this.entries=[],this.addEntry(n,t),null!==o&&(this.getEqualityFunction=function(){return o})}function s(i){return function(e){for(var n,t=this.entries.length,o=this.getEqualityFunction(e);t--;)if(o(e,(n=this.entries[t])[0]))switch(i){case 0:return!0;case 1:return n;case 2:return[t,n[1]]}return!1}}function l(a){return function(e){for(var n=e.length,t=0,o=this.entries,i=o.length;t<i;++t)e[n+t]=o[t][a]}}function m(e,n){var t=e[n];return t&&t instanceof g?t:null}function u(){var r=[],s={},l={replaceDuplicateKey:!0,hashCode:a,equals:null},e=arguments[0],n=arguments[1];n!==o?(l.hashCode=e,l.equals=n):e!==o&&function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])}(l,e);var c=l.hashCode,u=l.equals;this.properties=l,this.put=function(e,n){d(e),p(n);var t,o,i=c(e),a=null;return(t=m(s,i))?(o=t.getEntryForKey(e))?(l.replaceDuplicateKey&&(o[0]=e),a=o[1],o[1]=n):t.addEntry(e,n):(t=new g(i,e,n,u),r.push(t),s[i]=t),a},this.get=function(e){d(e);var n=c(e),t=m(s,n);if(t){var o=t.getEntryForKey(e);if(o)return o[1]}return null},this.containsKey=function(e){d(e);var n=c(e),t=m(s,n);return!!t&&t.containsKey(e)},this.containsValue=function(e){p(e);for(var n=r.length;n--;)if(r[n].containsValue(e))return!0;return!1},this.clear=function(){r.length=0,s={}},this.isEmpty=function(){return!r.length};var t=function(t){return function(){for(var e=[],n=r.length;n--;)r[n][t](e);return e}};this.keys=t("keys"),this.values=t("values"),this.entries=t("getEntries"),this.remove=function(e){d(e);var n,t=c(e),o=null,i=m(s,t);return i&&null!==(o=i.removeEntryForKey(e))&&0==i.entries.length&&(n=function(e,n){for(var t=e.length;t--;)if(n===e[t][0])return t;return null}(r,t),r.splice(n,1),delete s[t]),o},this.size=function(){for(var e=0,n=r.length;n--;)e+=r[n].entries.length;return e}}return g.prototype={getEqualityFunction:function(e){return typeof e.equals==c?n:r},getEntryForKey:s(1),getEntryAndIndexForKey:s(2),removeEntryForKey:function(e){var n=this.getEntryAndIndexForKey(e);return n?(this.entries.splice(n[0],1),n[1]):null},addEntry:function(e,n){this.entries.push([e,n])},keys:l(0),values:l(1),getEntries:function(e){for(var n=e.length,t=0,o=this.entries,i=o.length;t<i;++t)e[n+t]=o[t].slice(0)},containsKey:s(0),containsValue:function(e){for(var n=this.entries,t=n.length;t--;)if(e===n[t][1])return!0;return!1}},(u.prototype={each:function(e){for(var n,t=this.entries(),o=t.length;o--;)e((n=t[o])[0],n[1])},equals:function(e){var n,t,o,i=this.size();if(i!=e.size())return!1;for(n=this.keys();i--;)if(t=n[i],null===(o=e.get(t))||o!==this.get(t))return!1;return!0},putAll:function(e,n){for(var t,o,i,a,r=e.entries(),s=r.length,l=typeof n==c;s--;)o=(t=r[s])[0],i=t[1],l&&(a=this.get(o))&&(i=n(o,a,i)),this.put(o,i)},clone:function(){var e=new u(this.properties);return e.putAll(this),e}}).toQueryString=function(){for(var e,n=this.entries(),t=n.length,o=[];t--;)e=n[t],o[t]=encodeURIComponent(i(e[0]))+"="+encodeURIComponent(i(e[1]));return o.join("&")},u}();function startsWith(e,n){return 0===e.indexOf(n)}function DomDataCollection(e){var g=this;function m(){}g.config={recursion_level:1,collection_mode:"partial",functionsToExclude:[],function_list_size:1024,json_script:e||"json2.js"},g.emptyDomData=function(){g.dom_data={functions:{names:[],excluded:{size:0,count:0},truncated:!1},inputs:[],iFrames:[],scripts:[],collection_status:DomDataCollection.NotStarted}},g.startInspection=function(){var n=!1,e=!0;if(BrowserDetect.init(),"Explorer"!==BrowserDetect.browser)try{g.inspectJSFunctions(),e=!1}catch(e){n=n||!0}else g.dom_data.functions=[],void 0!==g.dom_data.functions&&void 0!==g.dom_data.functions.names||(g.dom_data.functions={names:[],excluded:{size:0,count:0},truncated:!1});try{g.inspectFrames(),e=!1}catch(e){n=n||!0}try{g.inspectScripts(),e=!1}catch(e){n=n||!0}try{g.inspectInputFields(),e=!1}catch(e){n=n||!0}g.dom_data.collection_status=n?e?DomDataCollection.Fail:DomDataCollection.Partial:DomDataCollection.Success,"Explorer"!==BrowserDetect.browser&&g.handleSizeLimit()},g.domDataAsJSON=function(){return stripIllegalChars(JSON.stringify(g.dom_data))},g.recursiveGetAllFunctionNamesUnderElement=function(e,n,t){var o,i,a=g.config,r=a.recursion_level,s=a.collection_mode;void 0!==g.dom_data.functions&&void 0!==g.dom_data.functions.names||(g.dom_data.functions={names:[],excluded:{size:0,count:0},truncated:!1});var l=g.dom_data.functions,c=l.excluded;for(var u in n)try{var d=n[u];if(o=""+d,0<e.length?prefix=e+".":prefix="",i=prefix+u,"function"==typeof d)if(g.functionShouldBeCollected(d,u)){var p=l.names;p[p.length]=i}else"partial"==s&&(c.size+=o.length,c.count++);t+1<r?g.recursiveGetAllFunctionNamesUnderElement(i,d,t+1):l.names.sort()}catch(e){window.console||(window.console={},window.console.info=m,window.console.log=m,window.console.warn=m,window.console.error=m),console&&console.log&&console.log("error counting functions: "+e.toString())}};var t=new Hashtable;g.initFunctionsToExclude=function(){t&&t.clear();for(var e=g.config.functionsToExclude,n=e.length;n--;)t.put(e[n],"")},g.functionShouldBeCollected=function(e,n){return"full"==g.config.collection_mode||(0===t.size()&&g.initFunctionsToExclude(),!t.containsKey(n))},g.inspectJSFunctions=function(){g.dom_data.functions=[],g.recursiveGetAllFunctionNamesUnderElement("",window,0)},g.handleSizeLimit=function(){var e=g.dom_data,n=g.config,t=n.function_list_size,o=e.functions;o.names.sort();var i=JSON.stringify(e);t<0&&(t=0);var a=0;if("full"!=n.colllection_mode&&i.length>t){for(var r=o.names,s=r.toString(),l=i.length-JSON.stringify(r).length+"[]".length,c=!1,u=r.length;!c;)1e3==a++&&(c=!0),lastComma=s.lastIndexOf(","),0<=lastComma&&0<u?(quotation_marks=2*u,l+lastComma+quotation_marks>t?(s=s.substring(0,lastComma-1),u--):c=!0):c=!0;e.functions.truncated=(1<u?(o.truncated=!0,o.names=o.names.slice(0,u-1)):(g.emptyDomData(),(e=g.dom_data).collection_status=DomDataCollection.Partial),!0)}},g.inspectFrames=function(){g.countElements("iframe")},g.countElements=function(e){var n=document.getElementsByTagName(e);void 0===g.dom_data.iFrames&&(g.dom_data.iFrames=[]);var t=g.dom_data.iFrames,o=t.length;for(i=0;i<n.length;i++)t[o+i]=""+n[i].src;t.sort()},g.inspectScripts=function(){var e=document.getElementsByTagName("script");g.dom_data.scripts=[];for(var n=0;n<e.length;n++)g.dom_data.scripts[n]=e[n].text.length},g.collectFields=function(e){var n=document.getElementsByTagName(e);void 0===g.dom_data.inputs&&(g.dom_data.inputs=[]);for(var t=g.dom_data.inputs,o=t.length,i=n.length;i--;){var a=n[i],r=a.name,s=a.id;r&&0<r.length?element_name=r:s&&0<s.length?element_name=s:element_name="NO_NAME",t[o+i]=element_name}t.sort()},g.inspectInputFields=function(){g.collectFields("input"),g.collectFields("textarea"),g.collectFields("select"),g.collectFields("button")},loadJSON=function(){if(!window.JSON){var e=document.getElementsByTagName("head")[0],n=document.createElement("script");n.type="text/javascript",n.src=g.config.json_script,e.appendChild(n)}},g.emptyDomData(),loadJSON()}function IE_FingerPrint(){this.deviceprint_browser=function(){var e=navigator.userAgent.toLowerCase();return t=e+SEP+navigator.appVersion+SEP+navigator.platform,t+=SEP+navigator.appMinorVersion+SEP+navigator.cpuClass+SEP+navigator.browserLanguage,t+=SEP+ScriptEngineBuildVersion(),t},this.deviceprint_software=function(){var e="",n=!0;try{var t;document.body.addBehavior("#default#clientCaps");var o=s.length;for(i=0;i<o;i++){t=activeXDetect(s[i]);var a=r[i];t?!0===n?(e+=a+PAIR+t,n=!1):e+=SEP+a+PAIR+t:(e+="",n=!1)}}catch(e){}return e};var r=["abk","wnt","aol","arb","chs","cht","dht","dhj","dan","dsh","heb","ie5","icw","ibe","iec","ieh","iee","jap","krn","lan","swf","shw","msn","wmp","obp","oex","net","pan","thi","tks","uni","vtc","vnm","mvm","vbs","wfd"],s=["7790769C-0471-11D2-AF11-00C04FA35D02","89820200-ECBD-11CF-8B85-00AA005B4340","47F67D00-9E55-11D1-BAEF-00C04FC2D130","76C19B38-F0C8-11CF-87CC-0020AFEECF20","76C19B34-F0C8-11CF-87CC-0020AFEECF20","76C19B33-F0C8-11CF-87CC-0020AFEECF20","9381D8F2-0288-11D0-9501-00AA00B911A5","4F216970-C90C-11D1-B5C7-0000F8051515","283807B5-2C60-11D0-A31D-00AA00B92C03","44BBA848-CC51-11CF-AAFA-00AA00B6015C","76C19B36-F0C8-11CF-87CC-0020AFEECF20","89820200-ECBD-11CF-8B85-00AA005B4383","5A8D6EE0-3E18-11D0-821E-444553540000","630B1DA0-B465-11D1-9948-00C04F98BBC9","08B0E5C0-4FCB-11CF-AAA5-00401C608555","45EA75A0-A269-11D1-B5BF-0000F8051515","DE5AED00-A4BF-11D1-9948-00C04F98BBC9","76C19B30-F0C8-11CF-87CC-0020AFEECF20","76C19B31-F0C8-11CF-87CC-0020AFEECF20","76C19B50-F0C8-11CF-87CC-0020AFEECF20","D27CDB6E-AE6D-11CF-96B8-444553540000","2A202491-F00D-11CF-87CC-0020AFEECF20","5945C046-LE7D-LLDL-BC44-00C04FD912BE","22D6F312-B0F6-11D0-94AB-0080C74C7E95","3AF36230-A269-11D1-B5BF-0000F8051515","44BBA840-CC51-11CF-AAFA-00AA00B6015C","44BBA842-CC51-11CF-AAFA-00AA00B6015B","76C19B32-F0C8-11CF-87CC-0020AFEECF20","76C19B35-F0C8-11CF-87CC-0020AFEECF20","CC2A9BA0-3BDD-11D0-821E-444553540000","3BF42070-B3B1-11D1-B5C5-0000F8051515","10072CEC-8CC1-11D1-986E-00A0C955B42F","76C19B37-F0C8-11CF-87CC-0020AFEECF20","08B0E5C0-4FCB-11CF-AAA5-00401C608500","4F645220-306D-11D2-995D-00C04F98BBC9","73FA19D0-2D75-11D2-995D-00C04F98BBC9"]}function Mozilla_FingerPrint(){}function Opera_FingerPrint(){}function Timer(){this.startTime=(new Date).getTime()}function getRandomPort(){return Math.floor(6e4*Math.random()+4e3)}DomDataCollection.Success=0,DomDataCollection.Fail=1,DomDataCollection.Partial=2,DomDataCollection.NotStarted=3,IE_FingerPrint.prototype=new FingerPrint,Mozilla_FingerPrint.prototype=new FingerPrint,Opera_FingerPrint.prototype=new FingerPrint,Timer.prototype.start=function(){this.startTime=(new Date).getTime()},Timer.prototype.duration=function(){return(new Date).getTime()-this.startTime};var ProxyCollector={};function BlackberryLocationCollector(){var i=this,n=null;this.getGeolocationWatchId=function(){return n};var a=null;this.getGeolocationLastPosition=function(){return a};var r=4;this.getGeolocationStatusCode=function(){return r};var s={aidMode:2,timeout:180,relevancy:120,expiration:48,alertDebug:!(this.getGeolocationErrorMessage=function(){return""})},l=-1,c=0;this.getInvokeCount=function(){return c},this.handleBlackBerryLocationTimeout=function(){-1!=l&&(i.stopWatch(),r=3,0===c&&0!==s.aidMode&&(c++,i.startLocationWatch()))},this.handlePosition=function(){clearTimeout(l);var e=!(l=-1);if(0===blackberry.location.latitude&&0===blackberry.location.longitude)s.alertDebug&&alert("Got empty position"),null===a&&(r=2);else{var n,t=null;if(t=blackberry.location.timestamp?getTimestampInMillis(blackberry.location.timestamp):(new Date).getTime(),(n=(new Date).getTime())-t<=60*s.expiration*60*1e3)if(null===a||t>a.timestamp){var o=null===a?0:a.timestamp;s.alertDebug&&alert("Saved new position. New timestamp: "+t+" Old: "+o),a={timestamp:t,coords:{latitude:blackberry.location.latitude,longitude:blackberry.location.longitude}},r=0}else s.alertDebug&&alert("New position is not saved. New timestamp: "+t+" Old: "+a.timestamp);else s.alertDebug&&alert("New position is not saved. It is expired: "+1e3*(n-t)*60*60+" hours old")}null!==a&&(e=(n=(new Date).getTime())-a.timestamp<1e3*s.relevancy);i.stopWatch(),s.alertDebug&&alert("Relevant position? "+e),(0===c&&0!==s.aidMode||!e)&&(c++,i.startLocationWatch())},this.init=function(e,n,t,o){0<=e&&e<=2&&(s.aidMode=e),null!==n&&90<=n&&n<=300&&(s.timeout=n),null!==t&&60<=t&&t<=240&&(s.relevancy=t),null!==o&&24<=o&&o<=60&&(s.expiration=o)},this.startLocationWatch=function(){0===c?blackberry.location.setAidMode(0):blackberry.location.setAidMode(s.aidMode);var e=1e3*s.timeout;return l=setTimeout("geoLocator.handleBlackBerryLocationTimeout()",e),blackberry.location.onLocationUpdate(i.handlePosition),blackberry.location.refreshLocation(),n=1,!0},this.stopWatch=function(){try{blackberry.location.removeLocationUpdate(i.handlePosition)}catch(e){}n=-2},this.generateGeolocationJSONStruct=function(){var e=null;if(null!==a){var n=convertTimestampToGMT(a.timestamp);e={GeoLocationInfo:[{Status:r,Longitude:a.coords.longitude,Latitude:a.coords.latitude,Timestamp:n}]}}else e={GeoLocationInfo:[{Status:r}]};return JSON.stringify(e)}}function detectFields(){var e,n,t=document.getElementsByTagName("form"),o=t.length,i=[];i.push("url="+window.location.href);for(var a=0;a<o;a++){i.push("form="+t[a].name),n=(e=t[a].getElementsByTagName("input")).length;for(var r=0;r<n;r++)"hidden"!=e[r].type&&i.push("input="+e[r].name)}return i.join("|")}ProxyCollector.internalIP="127.0.0.1",ProxyCollector.externalIP,ProxyCollector.internalPingTime,ProxyCollector.externalPingTime,ProxyCollector.setInternalPingTime=function(e){ProxyCollector.internalPingTime=e},ProxyCollector.setExternalPingTime=function(e){ProxyCollector.externalPingTime=e},ProxyCollector.PROXY_DETECTION_TIMEOUT=5e3,ProxyCollector.TIMEOUT_CHECK_FREQUENCY=1e3,ProxyCollector.isTimedOut=function(e,n,t){_timer=new Timer,n-_timer.duration()<=0&&(void 0===ProxyCollector.internalPingTime&&new RegExp("internalPingTime").test(e)||void 0===ProxyCollector.externalPingTime&&new RegExp("externalPingTime").test(e))?(e.call(this,-1),t.abort()):(void 0===ProxyCollector.internalPingTime&&new RegExp("internalPingTime").test(e)||void 0===ProxyCollector.externalPingTime&&new RegExp("externalPingTime").test(e))&&setTimeout(function(){ProxyCollector.isTimedOut(e,n-(_timer.duration()+ProxyCollector.TIMEOUT_CHECK_FREQUENCY),t)},ProxyCollector.TIMEOUT_CHECK_FREQUENCY)},ProxyCollector.doAjax=function(e,n){var t,o,i=document.location.protocol+"//"+e+":"+getRandomPort()+"/NonExistentImage"+getRandomPort()+".gif";if(window.XDomainRequest){t=new window.XDomainRequest,o=new Timer;try{t.timeout=ProxyCollector.PROXY_DETECTION_TIMEOUT,t.ontimeout=function(){n.call(this,-1),t.abort()},t.onprogress=function(){n.call(this,o.duration()),t.abort()},t.onerror=function(){n.call(this,o.duration()),t.abort()},t.open("GET",i,!0),t.send()}catch(e){ProxyCollector.doAjaxViaImage(n,i)}}else{var a="ontimeout"in(t=new XMLHttpRequest);o=new Timer;try{t.onreadystatechange=function(){4==t.readyState&&(void 0===ProxyCollector.internalPingTime&&new RegExp("internalPingTime").test(n)||void 0===ProxyCollector.externalPingTime&&new RegExp("externalPingTime").test(n))&&n.call(this,o.duration())},t.timeout=ProxyCollector.PROXY_DETECTION_TIMEOUT,t.ontimeout=function(){n.call(this,-1),t.abort()},t.open("GET",i,!0),a||ProxyCollector.isTimedOut(n,ProxyCollector.PROXY_DETECTION_TIMEOUT-o.duration(),t)}catch(e){ProxyCollector.doAjaxViaImage(n,i)}}},ProxyCollector.doAjaxViaImage=function(e,n){var t=new Image,o=new Timer;t.onerror=function(){e.call(this,o.duration())},t.src=n},ProxyCollector.collect=function(){ProxyCollector.doAjax(ProxyCollector.externalIP,ProxyCollector.setExternalPingTime),"object"==typeof XDomainRequest?ProxyCollector.externalPingTime||forceIE89Synchronicity():ProxyCollector.doAjax(ProxyCollector.internalIP,ProxyCollector.setInternalPingTime)},forceIE89Synchronicity=function(){ProxyCollector.externalPingTime?ProxyCollector.doAjax(ProxyCollector.internalIP,ProxyCollector.setInternalPingTime):setTimeout(forceIE89Synchronicity,100)},ProxyCollector.isValidIPAddress=function(e){if(/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/.test(e)){var n=e.split(".");if(0==parseInt(parseFloat(n[0])))return!1;for(var t=0;t<n.length;t++)if(255<parseInt(parseFloat(n[t])))return!1;return!0}return!1},ProxyCollector.initProxyCollection=function(){ProxyCollector.isValidIPAddress(ProxyCollector.externalIP)&&ProxyCollector.isValidIPAddress(ProxyCollector.internalIP)&&ProxyCollector.collect()};var SEP="|",PAIR="=",DEV="~";function FingerPrint(){var l=new Hashtable;l.put("npnul32","def"),l.put("npqtplugin6","qt6"),l.put("npqtplugin5","qt5"),l.put("npqtplugin4","qt4"),l.put("npqtplugin3","qt3"),l.put("npqtplugin2","qt2"),l.put("npqtplugin","qt1"),l.put("nppdf32","pdf"),l.put("NPSWF32","swf"),l.put("NPJava11","j11"),l.put("NPJava12","j12"),l.put("NPJava13","j13"),l.put("NPJava32","j32"),l.put("NPJava14","j14"),l.put("npoji600","j61"),l.put("NPJava131_16","j16"),l.put("NPOFFICE","mso"),l.put("npdsplay","wpm"),l.put("npwmsdrm","drm"),l.put("npdrmv2","drn"),l.put("nprjplug","rjl"),l.put("nppl3260","rpl"),l.put("nprpjplug","rpv"),l.put("npchime","chm"),l.put("npCortona","cor"),l.put("np32dsw","dsw"),l.put("np32asw","asw"),this.deviceprint_version=function(){return"3.4.2.0-SNAPSHOT"},this.deviceprint_browser=function(){return navigator.userAgent.toLowerCase()+SEP+navigator.appVersion+SEP+navigator.platform},this.deviceprint_software=function(){var e="",n=!0,t="",o=navigator.plugins,a=navigator.mimeTypes;if(0<o.length){var r="",s=o.length;for(i=0;i<s;i++)plugin=o[i],r=stripFullPath(plugin.filename,"Plugins","."),!0===n?n=(l.containsKey(r)?t+=l.get(r):t="",!1):t+=l.containsKey(r)?SEP+l.get(r):"";e=stripIllegalChars(t)}else if(0<a.length)for("",i=0;i<a.length;i++)mimeType=a[i],!0===n?n=(e+=l.containsKey(mimeType)?l.get(mimeType)+PAIR+mimeType:"unknown"+PAIR+mimeType,!1):l.containsKey(mimeType)?e+=SEP+l.get(mimeType)+PAIR+mimeType:t+="";return e},this.deviceprint_display=function(){var e="";return self.screen&&(e+=screen.colorDepth+SEP+screen.width+SEP+screen.height+SEP+screen.availHeight),e},this.deviceprint_all_software=function(){var e="",n=!0,t=navigator.plugins,o=t.length;if(0<o){var a="",r="";for(i=0;i<o;i++){r=stripFullPath(r=t[i].filename,"Plugins","."),!0===n?(a+=r,n=!1):a+=SEP+r}e=stripIllegalChars(a)}return e},this.deviceprint_timezone=function(){var e=(new Date).getTimezoneOffset()/60*-1;return(new Date).deviceprint_dst()&&e--,e},Date.prototype.deviceprint_stdTimezoneOffset=function(){var e=new Date(this.getFullYear(),0,1),n=new Date(this.getFullYear(),6,1);return Math.max(e.getTimezoneOffset(),n.getTimezoneOffset())},Date.prototype.deviceprint_dst=function(){return this.getTimezoneOffset()<this.deviceprint_stdTimezoneOffset()},this.deviceprint_language=function(){var e,n=navigator.language,t=navigator.browserLanguage,o=navigator.systemLanguage,i=navigator.userLanguage;return e=void 0!==n?"lang"+PAIR+n+SEP:void 0!==t?"lang"+PAIR+t+SEP:"lang"+PAIR+SEP,e+=void 0!==o?"syslang"+PAIR+o+SEP:"syslang"+PAIR+SEP,e+=void 0!==i?"userlang"+PAIR+i:"userlang"+PAIR},this.deviceprint_java=function(){return navigator.javaEnabled()?1:0},this.deviceprint_cookie=function(){var e=navigator.cookieEnabled?1:0;return void 0!==navigator.cookieEnabled||e||(document.cookie="testcookie",e=-1!==document.cookie.indexOf("testcookie")?1:0),e},this.deviceprint_appName=function(){var e=navigator.appName;return void 0!==e?e:""},this.deviceprint_appCodeName=function(){var e=navigator.appCodeName;return void 0!==e?e:""},this.deviceprint_online=function(){var e=navigator.onLine;return void 0!==e?e:""},this.deviceprint_opsProfile=function(){var e=navigator.opsProfile;return null!=e?e:""},this.deviceprint_userProfile=function(){var e=navigator.userProfile;return null!=e?e:""},this.deviceprint_screen_availWidth=function(){var e=screen.availWidth;return void 0!==e?e:""},this.deviceprint_screen_pixelDepth=function(){var e=screen.pixelDepth;return void 0!==e?e:""},this.deviceprint_screen_bufferDepth=function(){var e=screen.bufferDepth;return void 0!==e?e:""},this.deviceprint_screen_deviceXDPI=function(){var e=screen.deviceXDPI;return void 0!==e?e:""},this.deviceprint_screen_deviceYDPI=function(){var e=screen.deviceYDPI;return void 0!==e?e:""},this.deviceprint_screen_logicalXDPI=function(){var e=screen.logicalXDPI;return void 0!==e?e:""},this.deviceprint_screen_logicalYDPI=function(){var e=screen.logicalYDPI;return void 0!==e?e:""},this.deviceprint_screen_fontSmoothingEnabled=function(){var e=screen.fontSmoothingEnabled;return void 0!==e?e:""},this.deviceprint_screen_updateInterval=function(){var e=screen.updateInterval;return void 0!==e?e:""},this.deviceprint_ping_in=function(){return ProxyCollector&&ProxyCollector.internalPingTime?ProxyCollector.internalPingTime:""},this.deviceprint_ping_ex=function(){return ProxyCollector&&ProxyCollector.externalPingTime?ProxyCollector.externalPingTime:""}}function urlEncode(e){return encodeURIComponent(e).replace(/\~/g,"%7E").replace(/\!/g,"%21").replace(/\*/g,"%2A").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\'/g,"%27").replace(/\-/g,"%2D").replace(/\_/g,"%5F").replace(/\./g,"%2E")}function encode_deviceprint(){return urlEncode(add_deviceprint())}function decode_deviceprint(){return decodeURIComponent(urlEncode(encode_deviceprint))}function post_deviceprint(){return document.forms[0].pm_fp.value=encode_deviceprint(),!0}function post_fingerprints(e){e.deviceprint.value=encode_deviceprint()}function add_deviceprint(){var e;switch(BrowserDetect.init(),BrowserDetect.browser){case"Explorer":e=new IE_FingerPrint;break;case"Firefox":e=new Mozilla_FingerPrint;break;case"Opera":e=new Opera_FingerPrint;break;default:e=new FingerPrint}var n="version="+e.deviceprint_version()+"&pm_fpua="+e.deviceprint_browser()+"&pm_fpsc="+e.deviceprint_display()+"&pm_fpsw="+e.deviceprint_software()+"&pm_fptz="+e.deviceprint_timezone()+"&pm_fpln="+e.deviceprint_language()+"&pm_fpjv="+e.deviceprint_java()+"&pm_fpco="+e.deviceprint_cookie();return n=(n=(n=(n=n+"&pm_fpasw="+e.deviceprint_all_software())+"&pm_fpan="+e.deviceprint_appName()+"&pm_fpacn="+e.deviceprint_appCodeName()+"&pm_fpol="+e.deviceprint_online()+"&pm_fposp="+e.deviceprint_opsProfile()+"&pm_fpup="+e.deviceprint_userProfile()+"&pm_fpsaw="+e.deviceprint_screen_availWidth()+"&pm_fpspd="+e.deviceprint_screen_pixelDepth()+"&pm_fpsbd="+e.deviceprint_screen_bufferDepth()+"&pm_fpsdx="+e.deviceprint_screen_deviceXDPI()+"&pm_fpsdy="+e.deviceprint_screen_deviceYDPI()+"&pm_fpslx="+e.deviceprint_screen_logicalXDPI()+"&pm_fpsly="+e.deviceprint_screen_logicalYDPI()+"&pm_fpsfse="+e.deviceprint_screen_fontSmoothingEnabled()+"&pm_fpsui="+e.deviceprint_screen_updateInterval())+"&pm_os="+BrowserDetect.OS+"&pm_brmjv="+parseInt(BrowserDetect.version,10)+"&pm_br="+BrowserDetect.browser)+"&pm_inpt="+e.deviceprint_ping_in()+"&pm_expt="+e.deviceprint_ping_ex()}function form_add_data(e,n,t){return e&&0<e.length?e+="&":e="",e+=n+"="+escape(t.toString())}function form_add_deviceprint(e,n,t){return e=form_add_data(e,n+"d",t)}var HTML5="HTML5",BLACKBERRY="blackberry",UNDEFINED="undefined",GEO_LOCATION_DEFAULT_STRUCT='{"GeoLocationInfo":[{"Status":4}]}',geoLocator=null,geoLocatorStatus=!1;function detectDeviceCollectionAPIMode(){return typeof navigator.geolocation!=UNDEFINED?HTML5:typeof window.blackberry!=UNDEFINED&&blackberry.location.GPSSupported?BLACKBERRY:UNDEFINED}function init(e,n,t,o,i){var a=detectDeviceCollectionAPIMode();return a==HTML5?((geoLocator=new HTML5LocationCollector).init(e,n,t,o),!0):a==BLACKBERRY&&((geoLocator=new BlackberryLocationCollector).init(i,n,t,o),!0)}function startCollection(e,n,t,o,i){return!!(geoLocatorStatus=init(e,n,t,o,i))&&geoLocator.startLocationWatch()}function stopCollection(){geoLocatorStatus&&geoLocator.stopWatch()}function getGeolocationStruct(){return geoLocatorStatus?geoLocator.generateGeolocationJSONStruct():GEO_LOCATION_DEFAULT_STRUCT}function HTML5LocationCollector(){var t=this,n=-1;this.getGeolocationWatchId=function(){return n};var o=null;this.getGeolocationLastPosition=function(){return o};var i=4;this.getGeolocationStatusCode=function(){return i};var a="";this.getGeolocationErrorMessage=function(){return a};var r={accuracy:100,timeout:180,relevancy:120,expiration:48};this.getGeolocationConfig=function(){return r},this.startLocationWatch=function(){var e={enableHighAccuracy:!0,timeout:1e3*r.timeout,maximumAge:r.expiration};return navigator.geolocation?(n=navigator.geolocation.watchPosition(this.handlePosition,this.handleError,e),!0):!(i=4)},this.init=function(e,n,t,o){null!==e&&0<=e&&e<=200&&(r.accuracy=e),null!==n&&90<=n&&n<=300&&(r.timeout=n),null!==t&&60<=t&&t<=240&&(r.relevancy=t),null!==o&&24<=o&&o<=60&&(r.expiration=o)},this.handlePosition=function(e){var n=(new Date).getTime();(n-getTimestampInMillis(e.timestamp)<=60*r.expiration*60*1e3&&(null===o||e.timestamp>o.timestamp||e.coords.accuracy<o.coords.accuracy)&&(o=e,i=0),null!==o)&&(n-o.timestamp<=1e3*r.relevancy&&o.coords.accuracy<=r.accuracy&&t.stopWatch())},this.generateGeolocationJSONStruct=function(){var e=null;if(null!==o){var n=convertTimestampToGMT(o.timestamp);e={GeoLocationInfo:[{Status:i,Longitude:o.coords.longitude,Latitude:o.coords.latitude,Altitude:Math.round(o.coords.altitude),HorizontalAccuracy:Math.round(o.coords.accuracy),AltitudeAccuracy:Math.round(o.coords.altitudeAccuracy),Heading:Math.round(o.coords.heading),Speed:Math.round(o.coords.speed),Timestamp:n}]}}else e={GeoLocationInfo:[{Status:i}]};return JSON.stringify(e)},this.handleError=function(e){switch(e.code){case e.TIMEOUT:t.stopWatch(),i=3;break;case e.POSITION_UNAVAILABLE:i=2,a=e.message;break;case e.PERMISSION_DENIED:i=1;break;case e.UNKNOWN_ERROR:i=2,a=e.message}},this.stopWatch=function(){navigator.geolocation.clearWatch(n),n=-2}}var UIEventCollector=function(){var b=null,_=null,y=null,t=null,o=["output_size_limit"];function n(e){if(t={output_size_limit:1024,collection_mode:"partial"},e)for(p in e)if(void 0!==p._config){for(var n=o.length-1;0<=n;n--)o[n]!=p||(found=!0);t[p]=e[p]}y=!1,_=function(){var e=(document.createEvent?document.createEvent("Event"):document.createEventObject()).timeStamp||new Date;2100<(e=new Date(e)).getYear()&&(e=new Date(e/1e3));return e=e.getTime()}(),b={elements:new UIElementList,events:[],collection_status:0,toString:function(){return"RecordedData: {elements: "+this.elements+", events: "+this.events+"}"}},c()}function $(){for(var e=function(){for(var e=[],n=document.getElementsByTagName("input"),t=0,o=n.length;t<o;t++){var i=n[t];r(i)&&e.push(i)}return e}(),n=0,t=e.length;n<t;n++)s(e[n])}function r(e){if(e.tagName&&"input"==e.tagName.toLowerCase()){var n=e.getAttribute("type");if("text"==n||"checkbox"==n||"checkbox"==n)return!0}return!1}function s(e){var n=null,t=b.elements,o=(t.size(),g(e));return b.elements.containsKey(o)?n=t.get(o):((n=new InteractionElement).id(o),n.type(d(e)),n.length(e.value?e.value.length:0),t.put(n)),n}function i(e){var n=e||window.event,t=l(n);if(r(t)){var o=s(t);o.incrementEventCount();var i=new UIEvent;i.index(o.index()),i.type(u(n));var a=function(e){var n;e.timeStamp&&0!==e.timeStamp?(n=e.timeStamp,2100<new Date(n).getYear()&&(n/=1e3)):n=(new Date).getTime();return n}(n);i.offset(a-_),b.events.push(i)}return!0}function a(e){var n=e||window.event;return function(e){if("keydown"==e.type){var n=e.which||e.charCode||e.keyCode,t="undefined"!=typeof KeyboardEvent&&n==KeyboardEvent.DOM_VK_V||118==n||86==n;if(t&&(e.ctrlKey||e.metaKey))return!0}return!1}(n)?i({target:l(n),type:"paste"}):i(n)}function l(e){return e.target?e.target:e.srcElement}function c(){var e=i,n=document;n.addEventListener?(n.addEventListener("keydown",a,!1),n.addEventListener("paste",e,!1),n.addEventListener("focus",e,!0),n.addEventListener("blur",e,!0)):n.attachEvent&&(n.onkeydown=a,n.onfocusin=e,n.onfocusout=e)}function u(e){return"keydown"==e.type?UIEvent.KeyDown:"submit"==e.type?UIEvent.Submit:"paste"==e.type?UIEvent.Paste:"focus"==e.type||"focusin"==e.type?UIEvent.Focus:"blur"==e.type||"focusout"==e.type?UIEvent.Blur:UIEvent.Unknown}function d(e){return e.nodeName+(e.type?":"+e.type:"")}function g(e){return e.id?e.id:e.name?e.name:e.nodeName}return n(),c(),{addElement:function(e){return s(e)},getEventType:function(e){return u(e)},getEventCode:function(e){return(n=e)==UIEvent.KeyDown?"keydown":n==UIEvent.Submit?"submit":n==UIEvent.Focus?"focus":n==UIEvent.Blur?"blur":n==UIEvent.Paste?"paste":"unknown";var n},getRecordedData:function(){return b},getElementType:function(e){return d(e)},getElementId:function(e){return g(e)},initEventCollection:function(e){n(e)},getConfig:function(){return t},serialize:function(){!function(){$();for(var e=b.elements,n=e.size();1<=n;n--){var t=e.getByIndex(n),o=t.id(),i=document.getElementById(o);if(!i){var a=document.getElementsByName(o);0<a.length&&(i=a[0])}i&&i.value&&t.length(i.value.length)}}();for(var e=this.getRecordedData(),n=e.elements,t=[],o=0;o<n.length;o++)t[o]=!1;var i=e.events,a=e.collection_status,r="partial"==this.getConfig().collection_mode,s=this.getConfig().output_size_limit,l=i.length,c=2*"@".length,u=_+","+a;c+=1,c+=",".length,c+=u.length;for(var d="",p=n.size();0<p;p--){var g=n.getByIndex(p),m=g.serialize()+";";if(d.length,r&&c+d.length+m.length>s){y=!0;break}null==g.type().match("INPUT:checkbox")&&0<g.length()&&0==g.eventCount()&&(d=m+d)}c+=d.length;for(var h="";l--;){var f=i[l],v=f.index(),w=f.serialize()+";",C=(m=n.getByIndex(v).serialize()+";",w.length);if(t[v]||(C+=m.length),h.length,r&&c+h.length+C>s){y=!0;break}t[v]||(d=m+d,c+=m.length),t[v]=!0,h=w+h}return 0<d.length&&(d=d.substring(0,d.length-1)),0<h.length&&(h=h.substring(0,h.length-1)),d+"@"+h+"@"+(y?1:0)+","+u}}}();function UIEvent(){var n=this===window?{}:this;n.index=function(e){if(0===arguments.length)return n._index;n._index=e},n.offset=function(e){if(0===arguments.length)return n._offset;n._offset=e},n.type=function(e){if(0===arguments.length)return n._type;n._type=e},n.serialize=function(){return n.index()+","+n.type()+",0"},n.toString=function(){return"UIEvent: [index: "+n.index()+", type: "+n.type()+", offset: "+n.offset()+"]"}}function InteractionElement(){var n=this===window?{}:this;n._eventCount=0,n.id=function(e){if(0===arguments.length)return n._id;n._id=e},n.index=function(e){if(0===arguments.length)return n._index;n._index=e},n.length=function(e){if(0===arguments.length)return n._length;n._length=e},n.type=function(e){if(0===arguments.length)return n._type;n._type=e},n.incrementEventCount=function(){n._eventCount++},n.eventCount=function(){return n._eventCount},n.serialize=function(){var e=n.index();return n.index()+","+e+","+n.type()+","+n.length()},n.toString=function(){return"InteractionElement: [id: "+n.id()+", index: "+n.index()+", length: "+n.length()+", type: "+n.type()+"]"}}function UIElementList(){var e=this===window?{}:this,o=new Hashtable,i=new Hashtable;e.get=function(e){return o.get(e)},e.getByIndex=function(e){return i.get(e)},e.containsKey=function(e){return o.containsKey(e)},e.indexByKey=function(e){return get(e).index()},e.size=function(){return o.size()},e.put=function(e){var n=e.id();if(!o.containsKey(n)){o.put(n,e);var t=o.size();e.index(t),i.put(t,e)}},e.toString=function(){return"[size: "+o.size()+", names: ["+o+"], indexes: ["+i+"]]"}}function activeXDetect(e){var n=null;try{n=document.body.getComponentVersion("{"+e+"}","ComponentID")}catch(e){}return null!==n&&n}function stripIllegalChars(e){t="";for(var n=(e=e.toLowerCase()).length,o=0;o<n;o++){var i=e.charAt(o);"\n"!=i&&"/"!=i&&"\\"!=i?t+=i:"\n"==i&&(t+="n")}return t}function stripFullPath(e,n,t){var o=n,i=t,a=e,r=a.lastIndexOf(o);0<=r&&(filenameLen=a.length,a=a.substring(r+o.length,filenameLen));var s=a.indexOf(i);return 0<=s&&(a=a.slice(0,s)),a}UIEvent.Unknown=0,UIEvent.KeyDown=1,UIEvent.Submit=2,UIEvent.Focus=3,UIEvent.Blur=4,UIEvent.Paste=5;var BrowserDetect={init:function(){this.browser=this.searchString(this.dataBrowser)||"an unknown browser",this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version",this.OS=this.searchString(this.dataOS)||"an unknown OS"},searchString:function(e){for(var n=e.length,t=0;t<n;t++){var o=e[t],i=o.string,a=o.prop,r=o.identity;if(this.versionSearchString=o.versionSearch||r,i){if(-1!==i.toLowerCase().indexOf(o.subString.toLowerCase()))return r}else if(a)return r}},searchVersion:function(e){var n=e.toLowerCase().indexOf(this.versionSearchString.toLowerCase());if(-1!==n){var t=e.substring(n+this.versionSearchString.length);return 0!==t.indexOf(" ")&&0!==t.indexOf("/")&&0!==t.indexOf(":")||(t=t.substring(1)),parseFloat(t)}},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.userAgent.toLowerCase(),subString:"opera",identity:"Opera",versionSearch:"version"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{string:navigator.userAgent,subString:"mobile safari",identity:"Mobile Safari",versionSearch:"mobile safari"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent.toLocaleLowerCase(),subString:"blackberry",identity:"BlackBerry",versionSearch:"0/"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Trident",identity:"Explorer",versionSearch:"rv"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.userAgent,subString:"BlackBerry",identity:"BlackBerry"},{string:navigator.userAgent.toLowerCase(),subString:"android",identity:"Android"},{string:navigator.userAgent,subString:"Symbian",identity:"Symbian"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"},{string:navigator.userAgent,subString:"Windows CE",identity:"Windows CE"},{string:navigator.platform,subString:"Win",identity:"Windows"}]};function convertTimestampToGMT(e){var n=e;return e instanceof Date||(n=new Date(e)),offsetFromGmt=6e4*n.getTimezoneOffset(),n.getTime()+offsetFromGmt}function getTimestampInMillis(e){var n=e;return e instanceof Date&&(n=e.getTime()),n}function debug(e){}function BMNLgnCore(e){this.params=e,this.swfTimeoutV=null,this.rsaTimeoutV=null,this.lgnRSALoaded=!1,this.widgetDiv=".widget_login",this.isAcceptedCToken=!1,this.isAuthVal=!1,this.lockClickedButton=!1,this.enrollDataIn=null,this.enrollDataOut=null,this.enrollmentController=null,this.ENROLPHRASE_PATTERN=/^[A-Za-z0-9 ]{3,20}$/,this.ENROLRESPQUESTION_PATTERN=/^[A-Za-z0-9]{6,30}$/,this.enrollLoaded=!1,this.enrollIsError=!1,this.auEmpresa=null,this.stage=0,this.isOnRequest=!1,this.init()}!function(l){l.fn.alphanum=function(e){return t(this,f,r(e)),this},l.fn.alpha=function(e){return t(this,f,r(e,r("alpha"))),this};var e,n,c={allow:"",disallow:"",allowSpace:!0,allowNewline:!0,allowNumeric:!0,allowUpper:!0,allowLower:!0,allowCaseless:!0,allowLatin:!0,allowOtherCharSets:!0,forceUpper:!(l.fn.numeric=function(e){var n=g(e);return t(this,v,n),this.blur(function(){!function(e,n){var t=parseFloat(l(e).val()),o=l(e);if(isNaN(t))return o.val("");a(n.min)&&t<n.min&&o.val("");a(n.max)&&t>n.max&&o.val("")}(this,n)}),this}),forceLower:!1,maxLength:NaN},o={allowPlus:!1,allowMinus:!0,allowThouSep:!0,allowDecSep:!0,allowLeadingSpaces:!1,maxDigits:NaN,maxDecimalPlaces:NaN,maxPreDecimalPlaces:NaN,max:NaN,min:NaN},u={alpha:{allowNumeric:!1},upper:{allowNumeric:!1,allowUpper:!0,allowLower:!1,allowCaseless:!0},lower:{allowNumeric:!1,allowUpper:!1,allowLower:!0,allowCaseless:!0}},i={integer:{allowPlus:!1,allowMinus:!0,allowThouSep:!1,allowDecSep:!1},positiveInteger:{allowPlus:!1,allowMinus:!1,allowThouSep:!1,allowDecSep:!1}},d="!@#$%^&*()+=[]\\';,/{}|\":<>?~`.-_ ¬€£¦",s=",",p=".",w=function(){var e,n="0123456789".split(""),t={},o=0;for(o=0;o<n.length;o++)e=n[o],t[e]=!0;return t}(),C=(n=(e="abcdefghijklmnopqrstuvwxyz").toUpperCase(),new b(e+n));function t(e,u,d){e.each(function(){var c=l(this);c.off(".alphanum").on("keyup.alphanum change.alphanum paste.alphanum",function(e){var n="";e.originalEvent&&e.originalEvent.clipboardData&&e.originalEvent.clipboardData.getData&&(n=e.originalEvent.clipboardData.getData("text/plain")),setTimeout(function(){!function(e,n,t,o){var i=e.val();""==i&&0<o.length&&(i=o);var a=n(i,t);if(i==a)return;var r=e.alphanum_caret();e.val(a),i.length==a.length+1?e.alphanum_caret(r-1):e.alphanum_caret(r)}(c,u,d,n)},0)}).on("keypress.alphanum",function(e){var n=e.charCode?e.charCode:e.which;if((32<=(t=n)||10==t||13==t)&&!e.ctrlKey&&!e.metaKey){var t,o=String.fromCharCode(n),i=c.selection(),a=i.start,r=i.end,s=c.val(),l=s.substring(0,a)+o+s.substring(r);u(l,d)!=l&&e.preventDefault()}})})}function a(e){return!isNaN(e)}function r(e,n){void 0===n&&(n=c);var t,o,i,a,r,s={};return t="string"==typeof e?u[e]:void 0===e?{}:e,l.extend(s,n,t),void 0===s.blacklist&&(s.blacklistSet=(o=s.allow,i=s.disallow,a=new b(d+i),r=new b(o),a.subtract(r))),s}function g(e){var n,t={};return n="string"==typeof e?i[e]:void 0===e?{}:e,l.extend(t,o,n),t}function m(e,n,t){if(w[n])return!function(e,n){var t=n.maxDigits;if(""===t||isNaN(t))return!1;var o=h(e);return t<=o}(e,t)&&(!function(e,n){var t=n.maxPreDecimalPlaces;if(""===t||isNaN(t))return!1;if(0<=e.indexOf(p))return!1;var o=h(e);return t<=o}(e,t)&&(!function(e,n){var t=n.maxDecimalPlaces;if(""===t||isNaN(t))return!1;var o=e.indexOf(p);if(-1==o)return!1;var i=h(e.substring(o));return t<=i}(e,t)&&(a=e+n,(!(r=t).max||r.max<0||!(parseFloat(a)>r.max))&&(o=e+n,!(i=t).min||0<i.min||!(parseFloat(o)<i.min)))));var o,i,a,r;if(t.allowPlus&&"+"==n&&""==e)return!0;if(t.allowMinus&&"-"==n&&""==e)return!0;if(n==s&&t.allowThouSep&&function(e){if(0==e.length)return!1;if(0<=e.indexOf(p))return!1;var n=e.indexOf(s);if(n<0)return!0;var t=e.lastIndexOf(s);return!(e.length-t-1<3||0<h(e.substring(n))%3)}(e))return!0;if(n==p){if(0<=e.indexOf(p))return!1;if(t.allowDecSep&&0===t.maxDecimalPlaces)return!1;if(t.allowDecSep)return!0}return!1}function h(e){return(e+="").replace(/[^0-9]/g,"").length}function f(e,n){if("string"!=typeof e)return e;var t,o,i,a,r,s,l,c,u,d,p,g=e.split(""),m=[],h=0;for(h=0;h<g.length;h++){t=g[h];var f=m.join("");o=f,i=t,p=d=u=c=l=s=r=void 0,(a=n).maxLength&&o.length>=a.maxLength||!(0<=a.allow.indexOf(i)||a.allowSpace&&" "==i)&&(!(a.allowNewline||"\n"!=i&&"\r"!=i)||a.blacklistSet.contains(i)||!a.allowNumeric&&w[i]||!a.allowUpper&&(s=(r=i).toUpperCase(),l=r.toLowerCase(),r==s&&s!=l)||!a.allowLower&&(u=(c=i).toUpperCase(),d=c.toLowerCase(),c==d&&u!=d)||!a.allowCaseless&&(p=i).toUpperCase()==p.toLowerCase()||!a.allowLatin&&C.contains(i)||!(a.allowOtherCharSets||w[i]||C.contains(i)))||m.push(t)}var v=m.join("");return n.forceLower?v=v.toLowerCase():n.forceUpper&&(v=v.toUpperCase()),v}function v(e,n){if("string"!=typeof e)return e;var t,o=e.split(""),i=[],a=0;for(a=0;a<o.length;a++){t=o[a],m(i.join(""),t,n)&&i.push(t)}return i.join("")}function b(e){this.map="string"==typeof e?function(e){var n,t={},o=e.split(""),i=0;for(i=0;i<o.length;i++)n=o[i],t[n]=!0;return t}(e):{}}b.prototype.add=function(e){var n=this.clone();for(var t in e.map)n.map[t]=!0;return n},b.prototype.subtract=function(e){var n=this.clone();for(var t in e.map)delete n.map[t];return n},b.prototype.contains=function(e){return!!this.map[e]},b.prototype.clone=function(){var e=new b;for(var n in this.map)e.map[n]=!0;return e},l.fn.alphanum.backdoorAlphaNum=function(e,n){return f(e,r(n))},l.fn.alphanum.backdoorNumeric=function(e,n){return v(e,g(n))},l.fn.alphanum.setNumericSeparators=function(e){1==e.thousandsSeparator.length&&1==e.decimalSeparator.length&&(s=e.thousandsSeparator,p=e.decimalSeparator)}}(jQuery),function(i){function a(e,n){if(e.createTextRange){var t=e.createTextRange();t.move("character",n),t.select()}else null!=e.selectionStart&&(e.focus(),e.setSelectionRange(n,n))}i.fn.alphanum_caret=function(t,o){return void 0===t?function(e){if("selection"in document){var n=e.createTextRange();try{n.setEndPoint("EndToStart",document.selection.createRange())}catch(e){return 0}return n.text.length}if(null!=e.selectionStart)return e.selectionStart}(this.get(0)):this.queue(function(e){if(isNaN(t)){var n=i(this).val().indexOf(t);!0===o?n+=t.length:void 0!==o&&(n+=o),a(this,n)}else a(this,t);e()})}}(jQuery),function(c){var u=function(e){return e?e.ownerDocument.defaultView||e.ownerDocument.parentWindow:window},d=function(e,n){var t=c.Range.current(e).clone(),o=c.Range(e).select(e);return t.overlaps(o)?(t.compare("START_TO_START",o)<1?(startPos=0,t.move("START_TO_START",o)):(fromElementToCurrent=o.clone(),fromElementToCurrent.move("END_TO_START",t),startPos=fromElementToCurrent.toString().length),0<=t.compare("END_TO_END",o)?endPos=o.toString().length:endPos=startPos+t.toString().length,{start:startPos,end:endPos}):null},p=function(e,n,t){var o,i,a,r,s,l;t=t||0;for(var c=0;e[c];c++)3===(o=e[c]).nodeType||4===o.nodeType?(i=t,t+=o.nodeValue.length,a=i,r=t,l=o,"number"==typeof(s=n)[0]&&s[0]<r&&(s[0]={el:l,count:s[0]-a}),"number"==typeof s[1]&&s[1]<=r&&(s[1]={el:l,count:s[1]-a})):8!==o.nodeType&&(t=p(o.childNodes,n,t));return t};jQuery.fn.selection=function(e,n){return void 0!==e?this.each(function(){!function(e,n,t){var o=u(e);if(e.setSelectionRange)void 0===t?(e.focus(),e.setSelectionRange(n,n)):(e.select(),e.selectionStart=n,e.selectionEnd=t);else if(e.createTextRange){var i=e.createTextRange();i.moveStart("character",n),t=t||n,i.moveEnd("character",t-e.value.length),i.select()}else if(o.getSelection){var a=o.document,r=o.getSelection(),s=a.createRange(),l=[n,void 0!==t?t:n];p([e],l),s.setStart(l[0].el,l[0].count),s.setEnd(l[1].el,l[1].count),r.removeAllRanges(),r.addRange(s)}else o.document.body.createTextRange&&((s=document.body.createTextRange()).moveToElementText(e),s.collapse(),s.moveStart("character",n),s.moveEnd("character",void 0!==t?t:n),s.select())}(this,e,n)}):function(n){var e=u(n);if(void 0!==n.selectionStart)return document.activeElement&&document.activeElement!=n&&n.selectionStart==n.selectionEnd&&0==n.selectionStart?{start:n.value.length,end:n.value.length}:{start:n.selectionStart,end:n.selectionEnd};if(e.getSelection)return d(n);try{if("input"==n.nodeName.toLowerCase()){var t=u(n).document.selection.createRange(),o=n.createTextRange();o.setEndPoint("EndToStart",t);var i=o.text.length;return{start:i,end:i+t.text.length}}var a=d(n);if(!a)return a;var r=c.Range.current().clone(),s=r.clone().collapse().range,l=r.clone().collapse(!1).range;return s.moveStart("character",-1),l.moveStart("character",-1),0!=a.startPos&&""==s.text&&(a.startPos+=2),0!=a.endPos&&""==l.text&&(a.endPos+=2),a}catch(e){return{start:n.value.length,end:n.value.length}}}(this[0])},c.fn.selection.getCharElement=p}(jQuery),BMNLgnCore.prototype={constructor:BMNLgnCore,sendIU:function(e){identificarUsuario(null)},pd:function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},init:function(){var n=this;$("#wpp_login, #formBanorteId").unbind("keydown"),$("#wpp_login, #formBanorteId").unbind("keyup"),$("#wpp_login, #formBanorteId").unbind("keypress"),$("#btn_lgn_entrar").click(function(e){try{"on"==document.getElementById("flagBehavioWeb").value?(console.log("BehavioWeb sending User"),bw.saveData()):console.log("Flag BehavioWeb login off...")}catch(e){console.log("Error sending BehavioWeb login info...")}n.pd(e),$("#flagRecuperaCve").val(""),flagRecuperaCvejs="",n.sendIU(n)}),$(document).ready(function(){"modoSeparado"==modoPortaljs?($("#iFrameBlock").css("display","none"),$("#wpp_login").css("z-index","1000"),$("#flagRecuperaCve").val(""),flagRecuperaCvejs="",n.sendIU(n)):"1"==flagRecuperaCvejs&&($("#flagRecuperaCve").val(""),flagRecuperaCvejs="",$("#iFrameBlock").css("display","none"),$("#iFrameBlock").html(""),setTimeout(function(){popupiframe("#iFrameBlock",URL_RECUPERAR_CNTRSN,ALTO_WIN_RECUPERAR_PASSWORD,ANCHO_WIN_RECUPERAR_PASSWORD)},800))}),$("#userid").focus().keypress(function(e){if(13==e.keyCode)return n.pd(e),n.sendIU(n),e.stopPropagation(),!1}),$("#btnRegresarBloqueo").click(function(){event.preventDefault(),window.location=actionBackPortalPublico}),n.swfLoad(),-1!=window.navigator.userAgent.indexOf("MSIE 9.0")&&$("#wpp_enrolamientoWizard").addClass("ie")},addToolTip:function(e,n){$("#idTooltipPassword").html(""),$("#idTooltip").html("");var t=e.split("|");if(2==t.length){var o="<div class='boxed'><div class='arrow'></div><div class='content'><p>"+(i={title:t[0],body:t[1]}).body+"</p></div></div>";$(n).html(o),"modoSeparado"==modoPortaljs&&-1!=e.indexOf("15 minutos")&&($("#userid").prop("disabled",!0),$("#btn_lgn_entrar").prop("disabled","disabled"),setTimeout(function(){$("#formBanorteId").attr("action",actionBackPortalPublico),setUrlShort(actionBackPortalPublico),$("#formBanorteId").submit()},1e4))}else if(1==t.length){o="<div class='boxed'><div class='arrow'></div><div class='content'><p>"+e+"</p></div></div>";$(n).html(o)}else if(4==t.length){var i={title:t[1],body:t[2],name:t[0],help:t[3]};this.addVentana(i),$("#idTooltipPassword").html(""),$("#idTooltip").html(""),$("#idTooltipPassword").hide(),$("#idTooltip").hide(),this.showLightbox(!0),setTimeout(function(){$("#BEM_layerAux").css("display","none")},1e3)}this.isHomeViewMode()||$(".login_trigger").click()},showTokenTooltip:function(e){0==e.indexOf("error")?(this.addToolTip(e,"#idTooltipTokenCelular"),$("#idTooltipTokenCelular").css("top","270px")):$("#mensajeTokenCelular").html(e)},showLightbox:function(e,n){e?($("#wpp_login").css("z-index","999"),void 0!==n?lightbox("open"):lightbox("open",n)):($("#wpp_login").css("z-index","100"),lightbox("close"))},addVentana:function(e){var n="<h1>"+e.title+"</h1><p>"+e.body+"</p>";"modoSeparado"==modoPortaljs?n+='<button id="btnRegresarInicio" type = button onclick="regresaInicio();">Regresar</button>':n+='<button onclick="window.location = actionInicio;">Regresar</button>',n=n+'<ul class="submenu"><div class="tooltip_area"><li class="ayuda" id="ayuda'+e.name+'"><a href="#"><img class="icono">Ayuda</a><p class="p_ayuda">&nbsp;</p></li><div class="tooltip left" id="idTooltip'+e.name+'" style="display:block"><div class="boxed"><div class="arrow"></div><div class="content"><p>'+e.help+"</p></div></div></div></div></ul>",$(".content_box").hide(),$("#login_genericwindow").html(n),$("#login_genericwindow").show().css("opacity",1),$("#idTooltip"+e.name).hide(),$("#ayuda"+e.name).hover(function(){$("#idTooltip"+e.name).show()},function(){$("#idTooltip"+e.name).hide()})},showLoadingMask:function(e){var n=this.widgetDiv;e?($(n+" .loading").css("display","block"),$(n+" .loading").css("opacity","1"),$(n+" .loading").css("background-color","rgba(255,255,255,0.66)"),$(n+" .loading .gif").css("display","block"),$(n+" .loading .gif").css("opacity","1")):($(n+" .loading").css("display","none"),$(n+" .loading").css("opacity","0"),$(n+" .loading .gif").css("display","none"),$(n+" .loading .gif").css("opacity","0"))},validateResponsiveLogin:function(){return"none"==$(".widget_login").css("display")},swfRefreshData:function(e){var n=this,t=$("#rsaDeviceFso").val();96<e?console.log("Couldn't read the SWF. Possible reasons: <li>Macromadia flash is not installed.</li><li>Flash version is not supported (minimum requiered is 6.0.0).</li><li>Flash movie flashMovie was not found.</li>"):""==t||null==t||null==t?n.swfTimeoutV=setTimeout(function(){n.swfRefreshData(++e)},2e3):null!=n.swfTimeoutV&&clearTimeout(n.swfTimeoutV)},rsaRefresData:function(e,n){var t=add_deviceprint();48<n?console.log("Error rsaDevicePrint "+n):""==t||null==t||null==t?e.rsaTimeoutV=setTimeout(function(){e.rsaRefresData(++n)},800):($("#rsaDevicePrint").val(t),null!=e.rsaTimeoutV&&clearTimeout(e.rsaTimeoutV))},swfLoad:function(){var e=this;if(!e.validateResponsiveLogin()){var n="field_name=rsaDeviceFso&ip_address="+e.params.hAddr,t=e.params.ctxPath+"/js/rsa_fso";if(DetectFlashVer(6,0,0))$('<embed id="flash_id" width="0" height="0" src="'+t+'.swf" quality="high" bgcolor="#888888" flashvars="'+n+'" type="application/x-shockwave-flash">').appendTo(".login_box");ProxyCollector.externalIP=e.params.hAddr,window.addEventListener?window.addEventListener("load",ProxyCollector.initProxyCollection,!1):window.attachEvent?window.attachEvent("onload",ProxyCollector.initProxyCollection):window.onload=ProxyCollector.initProxyCollection,e.rsaRefresData(e,0),e.swfRefreshData(0),e.lgnRSALoaded=!0}},getLgnScript:function(e,n,t){var o=document.createElement("script"),i=document.getElementsByTagName("head")[0],a=!1;o.src=e,o.onload=o.onreadystatechange=function(){a||o.readyState&&"loaded"!=o.readyState&&"complete"!=o.readyState||(a=!0,n(),o.onload=o.onreadystatechange=null)},o.onerror=function(){t()},i.appendChild(o)},printErrorMsgOld:function(){var e="#idTooltipPassword";$("#idTooltip").html(""),$("#idTooltipPassword").html(""),""!=$errorLogin&&"null"!=$errorLogin?(e="true"==$redirect?(login_goto("login_password","homepage"),"#idTooltipPassword"):"#idTooltip",this.addToolTip($errorLogin,e)):$("#idTooltipPassword").html("")},isHomeViewMode:function(){return 0<$(".widget_login").length},initByViewMode:function(){var n=this,e=n.isHomeViewMode();"1"==mostrarLinks?($("#activarTokenId").show(),$("#sincronizarTokenId").show()):"0"==mostrarLinks?($("#activarTokenId").hide(),$("#sincronizarTokenId").hide()):($("#activarTokenId").show(),$("#sincronizarTokenId").show(),e&&$("#mostrarSeccionOtrasCuentas").show()),e&&("1"==mostrarSeccionOtrasCuentas?$("#others_box").show():"0"==mostrarSeccionOtrasCuentas?($("#others_box").hide(),$(".login_box").css("height","261px")):$("#others_box").show(),setTimeout(function(){$("#userid").focus()},1e3),$("#idTooltipPassword").html("")),$("#idTooltipBloqueo").hide(),$("#idTooltipFormAyuda").hide(),$("#ayudaBloqueo").hover(function(){$("#idTooltipBloqueo").show()},function(){$("#idTooltipBloqueo").hide()}),$("#ayudaFormulario").hover(function(){$("#idTooltipFormAyuda").show()},function(){$("#idTooltipFormAyuda").hide()}),"true"==$banderaBloqueo&&(e?login_goto("login_userblocked","homepage"):(login_goto("login_userblocked"),headerOpenWidget(".login_trigger"))),e?null!=$validacionSAT&&"null"!=$validacionSAT&&4<$validacionSAT.length&&($("#mensajeSAT").html($validacionSAT),$("#userid").prop("disabled",!0),$("#idBtnEntrar").prop("disabled",!0)):$("#btnRegresarInicio").on("click",function(e){n.pd(e),window.location=actionInicio}),n.printErrorMsgOld(),$("#btnCancelarActivaToken").on("click",function(e){n.pd(e)}),$("#btnAceptarActivaToken").on("click",function(e){n.pd(e)}),$("#activarTokenId").on("click",function(e){"PP_BEM"==$("#portalOrigen").val()?window.location.replace("?uri=nm:oid:activa-token-empresas"):popupiframe("#iFrameBlock",URL_ACTIVAR_TOKEN,ALTO_WIN_ACTIVAR_TOKEN,ANCHO_WIN_ACTIVAR_TOKEN)}),$("#sincronizarTokenId").on("click",function(e){popupiframe("#iFrameBlock",URL_SINCRONIZAR_TOKEN,ALTO_WIN_SINCRONIZAR_TOKEN,ANCHO_WIN_SINCRONIZAR_TOKEN)})},eliminarSesion:function(n){bmnLgnInstance.showLoadingMask(!0),$.ajax({type:"POST",url:urlServicioLogin,dataType:"json",async:!0,data:"servicio=eliminarSesion",success:function(e){bmnLgnInstance.showLoadingMask(!1),n&&("home"==e.vista?login_goto("login_login","homepage"):"internas"==e.vista&&login_goto("login_login")),bmnLgnInstance.clearPreSessionVars()}})},initFormPassword:function(){var n=this;console.log("tipoAuth:"+tipoAutenticacion),$("#labelToken").hide(),$("#tokenLogin").hide(),$("#tokenReposicionLogin").hide(),n.hideConcurrentSessionPanel(),5!=tipoAutenticacion&&19!=tipoAutenticacion||n.initWindowReposicion(),0==tipoAutenticacion?$("#divMensajeTokenCelular").hide():18==tipoAutenticacion?($("#labelToken").show(),$("#tokenLogin").show(),$("#divMensajeTokenCelular").hide(),$(".login_box").css("height","auto")):19==tipoAutenticacion?($("#divMensajeTokenCelular").show(),$("#labelToken").show(),$("#tokenLogin").show(),$("#tokenReposicionLogin").show(),$("#tokenLogin").css("margin-bottom","0px !important"),$(".login_box").css("height","auto")):5==tipoAutenticacion?$("#tokenReposicionLogin").show():($("#labelToken").hide(),$("#tokenLogin").hide(),$("#divMensajeTokenCelular").hide()),$("#userid").val(userid),setTimeout(function(){$("#passwordLogin").show().focus()},200),"null"!=$errorLogin&&"true"==$redirect&&($("#idTooltipPassword").html("<div class='boxed' ><div class='arrow'></div><div class='content'><p>"+$errorLogin+"</p></div></div>"),bmnLgnInstance.addToolTip($errorLogin,"#idTooltipPassword")),$("#passwordLogin, #tokenLogin").focus().keypress(function(e){if(13==e.keyCode)return $("#btnAceptarloginPasswordAsync").click(),e.stopPropagation(),!1}),$("#idTextoAyuda").html(mensajeAyudaCntrsn),$("#idTooltipPasswordAyuda").hide(),$("#ayudaPassword").hover(function(){$("#idTooltipPasswordAyuda").show()},function(){$("#idTooltipPasswordAyuda").hide()}),$("#btnCancelarloginPassword").on("keypress",function(e){13==e.keyCode&&$("#btnCancelarloginPassword").click()}),$("#btnCancelarloginPassword").on("click",function(e){n.pd(e),$("#idBtnEntrar").prop("disabled",!1),$("#idTooltipPassword").html(""),$("#userid").val(""),$("#passwordLogin").val(""),n.stage=0,n.cierraSesionCanal(n),n.eliminarSesion(!0),$("#flagRecuperaCve").val("2"),flagRecuperaCvejs="2","modoSeparado"==modoPortaljs&&(console.log("modoSeparado ::: Redireccionando a portal publico"),$("#formBanorteId").attr("action",actionBackPortalPublico),console.log("modoSeparado ::: action: "+$("#formBanorteId").attr("action"))),setUrlShort(""),$("#formBanorteId").submit()}),$("#olvideContraseniaId").on("click",function(e){n.pd(e),$("#idBtnEntrar").prop("disabled",!1),$("#idTooltipPassword").html(""),$("#userid").val(""),$("#passwordLogin").val(""),n.stage=0,n.cierraSesionCanal(n),n.eliminarSesion(!0),"modoSeparado"==modoPortaljs?($("#flagRecuperaCve").val("1"),flagRecuperaCvejs="1",$("#formBanorteId").attr("action",actionBackPortalPublico),$("#formBanorteId").submit()):setTimeout(function(){popupiframe("#iFrameBlock",URL_RECUPERAR_CNTRSN,ALTO_WIN_RECUPERAR_PASSWORD,ANCHO_WIN_RECUPERAR_PASSWORD)},800)}),n.initLinkReposicionToken(n),n.mostrarLinks("#olvideContraseniaId")},sendPx:function(e){$("#btnAceptarloginPasswordAsync").click()},mostrarLinks:function(e){"1"==mostrarLinks?$(e).show():"0"==mostrarLinks?$(e).hide():$(e).show()},onClickOlvideContrasenia:function(e){bmnLgnInstance.pd(e),$("#btnCancelarloginPassword").click(),setTimeout(function(){popupiframe("#iFrameBlock",URL_RECUPERAR_CNTRSN,ALTO_WIN_RECUPERAR_PASSWORD,ANCHO_WIN_RECUPERAR_PASSWORD)},800)},clearPreSessionVars:function(){$errorLogin="",$identificarUsuarioResponse=""},doAjaxS:function(e,n,t,o,i){var a=this;$.support.cors=!0,$.ajax({url:e,async:!0,type:"POST",dataType:t,data:n,crossDomain:!0,beforeSend:function(){a.showLoadingMask(!0)},success:function(e){a.showLoadingMask(!1),o(e)},error:function(e,n,t){a.showLoadingMask(!1),i(e,n,t)}})},initWindowReposicion:function(){var n=this;n.isAuthVal||($("#btnCancelarRCTokenPassword").click(function(e){$("#wpp_loginSincronizar").hide(),$("#idTooltipPasswordRCToken").hide(),$("#wpp_login").show()}),$("#btnAceptarRCTokenPassword").click(function(e){n.lockClickedButton||(lockClickedButton=!0,n.sendCTokenCredentials())}),n.mostrarLinks("#olvideContraseniaIdRCToken"),$("#olvideContraseniaIdRCToken").click(function(e){n.pd(e),$("#wpp_login").show(),$("#wpp_loginSincronizar").hide(),$("#olvideContraseniaId").click()}),$("#txt_lgnRCTkInputTelefono").blur(function(e){n.validateFrmReposicionToken()}),$("#checkboxToken").click(function(e){n.isAcceptedCToken=$(this).is(":checked"),n.isAcceptedCToken,n.isAcceptedCToken,n.validateFrmReposicionToken()}),$("#btn_changeCToken").click(function(e){$(this).attr("disabled","disabled"),n.sendCTokenReplacement()}),$("#btn_cancelCToken").click(function(e){$("#wpp_solicitaReponerToken").hide(),$("#wpp_loginSincronizar").hide(),$("#wpp_login").show(),$("#checkboxToken").is(":checked")&&$("#checkboxToken").click(),$("#txt_lgnRCTkInputTelefono").val(""),$("#btn_changeCToken").attr("disabled",""),$("#txt_lgnRCTkInputTelefono_tip").hide(),n.showWppErrorRCToken(n,!1)}),$("#btn_okCToken").click(function(e){$("#wpp_confirmaReponerToken").hide(),$("#btn_cancelCToken").click()}),n.isAuthVal=!0)},initLinkReposicionToken:function(n){$("#reponerTokenId").click(function(e){n.pd(e),$("#passwordLoginRCToken").val(""),$("#nombreEnmascaradoRCToken").html($("#nombreEnmascarado").html()),$("#imgLoginRCToken").attr("src",$("#imgLogin").attr("src")),$("#mensajePersonalRCToken").html($("#mensajePersonal").html()),$("#wpp_loginSincronizar").show(),$("#wpp_login").hide()})},isNumberKey:function(e,n){var t=n.which?n.which:n.keyCode;return 8===t||46!==t&&(9<e.length&&13===t||!(9<e.length)&&!(31<t&&(t<48||57<t)))},sendCTokenCredentials:function(){var n=this,e={rctpass:$("#passwordLoginRCToken").val(),rctkn:"",modoRedirect:"C",flujoOrigen:"rct"};null!=e.rctpass&&""!=e.rctpass?($("#idTooltipPasswordRCToken").hide(),n.doAjaxS(urlServicioLogin,{servicio:"autenticaSimple",dataObj:JSON.stringify(e),tipoAutenticacion:0},"text",function(e){try{null!=(e=JSON.parse(e))&&null!=e&&(0==e.code?($("#passwordLoginRCToken").val(""),$("#wpp_loginSincronizar").hide(),$("#wpp_solicitaReponerToken").show()):(n.addToolTip(e.message,"#idTooltipPasswordRCToken"),$("#idTooltipPasswordRCToken").show()))}catch(e){$("#passwordLoginRCToken").val(""),$("#wpp_loginSincronizar").hide(),$("#wpp_solicitaReponerToken").show()}lockClickedButton=!1},function(e,n,t){lockClickedButton=!1})):($("#idTooltipPasswordRCToken .content").html("<p>Escribir su contraseña<p>"),$("#idTooltipPasswordRCToken").show())},sendCTokenReplacement:function(){var n=this,e={numTel:$("#txt_lgnRCTkInputTelefono").val(),acepto:n.isAcceptedCToken};n.doAjaxS(urlServicioLogin,{servicio:"reposicionTokenCelular",dataObj:JSON.stringify(e)},"json",function(e){0==e.code?n.showWppSuccessRCToken(n):n.showWppErrorRCToken(n,!0),lockClickedButton=!1},function(e,n,t){lockClickedButton=!1})},showWppErrorRCToken:function(e,n){n?$("#wpp_solicitaReponerToken .error-message").show():$("#wpp_solicitaReponerToken .error-message").hide()},showWppSuccessRCToken:function(e){$("#wpp_solicitaReponerToken").hide(),$("#wpp_confirmaReponerToken").show()},validateFrmReposicionToken:function(){var e=!0,n=$("#txt_lgnRCTkInputTelefono").val();return n.length<10&&0<n.length?($("#txt_lgnRCTkInputTelefono_tip").html("El número de celular debe corresponder a 10 dígitos."),$("#txt_lgnRCTkInputTelefono_tip").show(),e=!1):0==n.length&&($("#txt_lgnRCTkInputTelefono_tip").html("Tu número de celular es requerido."),$("#txt_lgnRCTkInputTelefono_tip").show(),e=!1),this.isAcceptedCToken||(e=!1),e?($("#txt_lgnRCTkInputTelefono_tip").hide(),$("#btn_changeCToken").removeAttr("disabled")):$("#btn_changeCToken").attr("disabled","disabled"),e},showWppErrorEnrolamiento:function(e,n){n?$("#wpp_enrolamientoWizard .error-message").show():$("#wpp_enrolamientoWizard .error-message").hide()},showEnrolmentWz:function(){this.getEnrolamientoQueryData()},setThemeColors:function(e){var n=e.auEmpresa;$("#wpp_enrolamientoWizard").addClass("ebanorte");var t="";t=1==n?" Si después de que ingresaste tu nombre de usuario NO observas o NO identificas la imagen y la frase que elegiste, NO ingreses tu contraseña y comunícate al Centro de Contacto al teléfono: (81) 8156-4444.":"Si después de que ingresaste tu nombre de usuario NO observas o NO identificas la imagen y la frase que elegiste, NO ingreses tu contraseña y comunícate al Centro de Contacto a los teléfonos: Ciudad de México: (55) 5140-5600, Monterrey: (81) 8156-9600, Guadalajara: (33) 3669-9000. Resto del país: 01-800-BANORTE (01800-226-6783).",$("#login_preferente_mensaje").html(t)},getEnrolamientoQueryData:function(){var n=this;n.doAjaxS(urlServicioLogin,{servicio:"enrolamientoAAQueries",dataObj:"{}"},"json",function(e){0==e.code?(n.loadEnrollEvents(n),n.loadEnrollQueryData(n,e),$(".steps-container .step p.error-message").hide(),n.showLightbox(!0),$("#wpp_login").hide(),n.setThemeColors(n),$("#wpp_enrolamientoWizard").show(),$("#wpp_enrolamientoWizard .thumbnail:first-child").mouseover(),$("#wpp_enrolamientoWizard .thumbnail:first-child").click()):$("#btnCancelarloginPassword").click()},function(e,n,t){})},setEnrolamientoQueryData:function(n,t){n.enrollmentController.deactivateButton(),n.doAjaxS(urlServicioLogin,{servicio:"enrolamientoAAUpdates",dataObj:JSON.stringify(n.enrollDataOut)},"json",function(e){0==e.code?($("#wpp_enrolamientoWizard .modal-footer").addClass("hide"),n.enrollmentController.animateSuccessButton(),n.enrollIsError=!1,t()):(n.showWppErrorEnrolamiento(n,!0),$("#wpp_enrolamientoWizard .error-message").html(e.message),n.enrollIsError=!0)},function(e,n,t){})},loadEnrollQueryData:function(t,e){t.enrollDataIn={svcData:$.parseJSON(e.data),pageSize:10,pageNum:0,pagePos:0},t.enrollDataOut={imgSelId:-1,imgPhrase:"",retoQuestionId:-1,retoQuestionPhrase:""};var n=t.enrollDataIn,o=n.svcData;o.images&&(n.pageNum=Math.floor(o.images.length/n.pageSize)+(o.images.length%n.pageSize!=0?0:-1),t.loadEnrollImagesPage(t)),o.questions&&t.loadEnrollQuestions(t),t.enrollLoaded||($("#wpp_enrolamientoWizard input").on("keypress",function(e){var n=e.keyCode?e.keyCode:e.which;if(9==n)return!1;$(this).hasClass("uppercase-message")&&(65<=n&&n<=90?t.enrollmentController.validations.activateUpperCaseMessage():t.enrollmentController.validations.deactivateUpperCaseMessage())}).on("blur",function(){"enrollPhraseInput"==$(this).attr("id")&&(t.enrollDataOut.imgPhrase=$(this).val()),$(this).hasClass("combo-box-input")||t.enrollmentController.validations.validateStep(),$(this).hasClass("uppercase-message")&&t.enrollmentController.validations.deactivateUpperCaseMessage()}).on("keyup",function(){"enrollPhraseInput"==$(this).attr("id")&&(t.enrollDataOut.imgPhrase=$(this).val()),$(this).hasClass("combo-box-input")||t.enrollmentController.validations.validateStep()}),$("#wpp_enrolamientoWizard .combo-box .combo-box-input, #wpp_enrolamientoWizard .combo-box .combo-box-icon").on("click",function(){t.enrollmentController.comboBox.toggle()}),$("#wpp_enrolamientoWizard .combo-box .combo-box-options li").on("click",function(){t.enrollmentController.comboBox.selectOption($(this))}),$("#wpp_enrolamientoWizard .alphanumeric").on("focus",function(){var e=!0;$(this).hasClass("no-space")&&(e=!1),$(this).alphanum({allowSpace:e,allowOtherCharSets:!1})}),t.enrollLoaded=!0)},getIniFinImage:function(e){var n=e.enrollDataIn,t=n.svcData.images.length,o=n.pagePos*n.pageSize,i=o+n.pageSize;return{ini:o,fin:i=t<i?t:i}},loadEnrollImagesPage:function(n){var e=n.getIniFinImage(n);$("#lgn_image_selector .col-1").empty(),$("#lgn_image_selector .col-2").empty(),n.enrollDataOut.imgSelId=-1;for(var t=!0,o=e.ini;o<e.fin;++o){var i=n.enrollDataIn.svcData.images[o],a=$("#lgn_image_selector .col-1"),r=$("#lgn_image_selector .col-2"),s='<img data-image="'+i.imageId+'" src="'+i.path+'" '+(t?'class="active"':"")+">",l='<img class="thumbnail'+(t?" active":"")+'" data-image="'+i.imageId+'" src="'+i.path+'">';t=!1,a.append(s),r.append(l)}$("#wpp_enrolamientoWizard .thumbnail").on("mouseenter",function(){var e=$(this).data("image");n.enrollmentController.imageSelect.mouseIn(e)}).on("mouseleave",function(){var e=$(this).data("image");n.enrollmentController.imageSelect.mouseOut(e)}).on("click",function(){var e=$(this).data("image");n.enrollmentController.imageSelect.select(e,$(this)),n.enrollDataOut.imgSelId=e,n.enrollmentController.validations.validateStep()}),$("#wpp_enrolamientoWizard .thumbnail:first-child").mouseover(),$("#wpp_enrolamientoWizard .thumbnail:first-child").click()},loadEnrollQuestions:function(e){var n=e.enrollDataIn.svcData;for(var t in n.questions){var o=n.questions[t];$(".modal.enroll .modal-body .steps-container .step .combo-box ul").append('<li data-question="'+o.questionId+'">'+o.questionText+"</li>")}},loadEnrollEvents:function(t){if(t.enrollLoaded){var e=t.enrollmentController;e.currentStep=0,e.clickInProgress=!1,e.positions=[],e.classes=[]}else{var o={currentStep:0,clickInProgress:!1,positions:[],classes:[],imageSelect:{activeImage:"XYZ",hoveredImage:null,mouseIn:function(e){e!==this.activeImage&&""!==e&&(this.hoveredImage=$("#wpp_enrolamientoWizard .image-selector .col-1 img[data-image="+e+"]"),this.hoveredImage.addClass("hover"))},mouseOut:function(e){e!==this.activeImage&&this.hoveredImage.removeClass("hover")},loadMoreImages:function(){t.getOnlyUserImage(t)},select:function(e,n){var t=this.hoveredImage;e!==this.activeImage&&""!==this.activeImage&&(t.addClass("active").removeClass("hover"),t.css({"z-index":2}),$("#wpp_enrolamientoWizard .image-selector .col-1 img[data-image="+this.activeImage+"]").removeClass("active"),this.activeImage=e,$("#enrollImageInput").val(t.attr("src")),$("#wpp_enrolamientoWizard .thumbnail.active").removeClass("active"),setTimeout(function(){t.removeAttr("style"),n.addClass("active")},200))}},animateSuccessButton:function(){$("#wpp_enrolamientoWizard .icon-success").addClass("animate"),$("#wpp_enrolamientoWizard .icon-border").addClass("animate")},activateButton:function(){$("#wpp_enrolamientoWizard .next-btn").prop("disabled",!1)},deactivateButton:function(){$("#wpp_enrolamientoWizard .next-btn").prop("disabled",!0)},doNext:function(e){e.currentStep++,e.deactivateButton(),$("#wpp_enrolamientoWizard .steps-container").css({left:e.positions[e.currentStep]}),setTimeout(function(){$("#wpp_enrolamientoWizard .progress-bar-container").attr("class",e.classes[e.currentStep])},500)},nextStep:function(){this.positions=[0,-796,-1592],this.classes=["progress-bar-container","progress-bar-container question","progress-bar-container result"],0===this.currentStep?this.doNext(this):1===this.currentStep&&t.setEnrolamientoQueryData(t,function(){t.enrollmentController.doNext(t.enrollmentController),"PP_SAT"==bmnLgnPortal?($("#btnIngresarAhora").show(),$("#wpp_enrolamientoWizard .steps-container .step .result-options").hide()):($("#btnIngresarAhora").hide(),$("#wpp_enrolamientoWizard .steps-container .step .result-options").show())})},comboBox:{isActive:!1,options:$("#wpp_enrolamientoWizard .combo-box-options"),input:$("#wpp_enrolamientoWizard .combo-box-input"),show:function(){var e=this.options;e.css("display","block"),setTimeout(function(){e.addClass("active")},50),this.isActive=!0},hide:function(){var e=this.options;e.removeClass("active"),setTimeout(function(){e.removeAttr("style")},300),this.isActive=!1},toggle:function(){this.isActive?this.hide():this.show()},selectOption:function(e){this.input.val(e.context.innerHTML),$("#wpp_enrolamientoWizard .combo-box-options li.active").removeClass("active"),e.context.className="active",this.toggle(),t.enrollDataOut.retoQuestionId=e.data("question"),o.validations.validateStep()}},tooltip:{show:function(e){$(e).addClass("active")},hide:function(e){$(e).removeClass("active")}},validations:{activateUpperCaseMessage:function(){var e=$("#enrollmentAnswerUpperMessage");e.hasClass("active")||e.addClass("active")},deactivateUpperCaseMessage:function(){var e=$("#enrollmentAnswerUpperMessage");e.hasClass("active")&&e.removeClass("active")},validatePhrase:function(){var e=!0;e&=t.ENROLPHRASE_PATTERN.test(t.enrollDataOut.imgPhrase),(e&=-1!==t.enrollDataOut.imgSelId)?o.activateButton():o.deactivateButton()},validateQuestion:function(){return""!==$("#enrollQuestionInput").val()},validateAnswer:function(){var e=!0,n=$("#enrollAnswerInput").val();return n.length<6?(o.tooltip.show("#answerTooltip"),e&=!1):(o.tooltip.hide("#answerTooltip"),e&=!0),e&=t.ENROLRESPQUESTION_PATTERN.test(n),t.enrollDataOut.retoQuestionPhrase="",e},validateConfirmation:function(){var e=!0;return $("#enrollConfirmationInput").val()!==$("#enrollAnswerInput").val()?(o.tooltip.show("#confirmationTooltip"),e&=!1):(o.tooltip.hide("#confirmationTooltip"),t.enrollDataOut.retoQuestionPhrase=$("#enrollConfirmationInput").val(),e&=!0),e},validateStep:function(){0===o.currentStep?this.validatePhrase():this.validateAnswer()&&this.validateConfirmation()&&this.validateQuestion()?o.activateButton():o.deactivateButton()}},reset:function(){$(".progress-bar-container").attr("class","progress-bar-container"),$("#wpp_enrolamientoWizard .modal-footer").removeClass("hide"),$("#wpp_enrolamientoWizard .steps-container").css({left:0}),this.deactivateButton(),this.tooltip.hide("#answerTooltip"),this.tooltip.hide("#confirmationTooltip"),$("#enrollAnswerInput").val(""),$("#enrollConfirmationInput").val(""),$("#enrollPhraseInput").val(""),$("#enrollQuestionInput").val("")},closeModal:function(){$("#wpp_enrolamientoWizard").fadeOut(800,function(){o.reset()})}};t.enrollmentController=o,$("#wpp_enrolamientoWizard .load-btn").on("click",function(){o.imageSelect.loadMoreImages()}),$("#wpp_enrolamientoWizard .next-btn").on("click",function(){o.nextStep()}),$("#wpp_enrolamientoWizard .hover-tooltip").on("mouseenter",function(){o.tooltip.show("#phraseTooltip")}).on("mouseleave",function(){o.tooltip.hide("#phraseTooltip")}),$("#wpp_enrolamientoWizard .cancel-btn").on("click",function(){o.closeModal(),$("#wpp_login").show(),$("#btnCancelarloginPassword").click()}),$("#btnIngresarAhora").click(function(e){$("#formBanorteId").submit()}),$("#btnIngresarAhora2").click(function(e){$("#formBanorteId").submit()}),$("#btnActivarAlertasEIngresar").click(function(e){t.activarAlertas(t)})}},getOnlyUserImage:function(o){o.doAjaxS(urlServicioLogin,{servicio:"enrolamientoAAQueryImg",dataObj:"{}"},"text",function(e){try{var n=JSON.parse(e),t=JSON.parse(n.data);console.log(t.images),o.enrollDataIn.svcData.images=t.images,o.loadEnrollImagesPage(o)}catch(e){}},function(e,n,t){})},activarAlertas:function(e){e.doAjaxS(urlServicioLogin,{servicio:"activarAlertas",dataObj:JSON.stringify({setAlertasFlow:"true"})},"text",function(e){try{JSON.parse(e)}catch(e){}$("#formBanorteId").submit()},function(e,n,t){$("#formBanorteId").submit()})},cierraSesionCanal:function(e){e.doAjaxS(urlServicioLogin,{servicio:"cierreLgnSesionCanal",dataObj:"{}"},"text",function(e){try{JSON.parse(e)}catch(e){}lockClickedButton=!1},function(e,n,t){})},validatePnT:function(e,n,t){var o=!1;if(""!=$("#passwordLogin").val()){if($("#idTooltipPassword").html(""),o=!0,$("#tokenLogin").is(":visible")){o=!1;var i=$("#tokenLogin").val();null!=i&&null!=i&&4<i.length?(o=!0,$("#idTooltipPassword").html("").removeClass("password-tooltip").removeClass("token-tooltip").removeClass("token-celular-tooltip")):(e.pd(n),$("#idTooltipPassword").removeClass("password-tooltip"),18==tipoAutenticacion?$("#idTooltipPassword").addClass("token-tooltip"):19==tipoAutenticacion&&$("#idTooltipPassword").addClass("token-celular-tooltip"),$("#idTooltipPassword").html("<div class='boxed' ><div class='arrow'></div><div class='content'><p>Escribir token</p></div></div>"),$("#tokenLogin").focus(),$("#idTooltipPassword").show())}o&&t(e)}else{var a="",r=$("#questionId").val();a=null!=r&&null!=r&&0<r.length?"respuesta":"contrase&ntilde;a",e.pd(n),$("#idTooltipPassword").addClass("password-tooltip").html("<div class='boxed' ><div class='arrow'></div><div class='content'><p>Escribir su "+a+"</p></div></div>"),$("#passwordLogin").focus(),$("#idTooltipPassword").show()}},processAuthWT:function(e,n,t){console.log("processAuthWT: executing function ..."),e.validatePnT(e,n,function(o){o.doAjaxS(urlServicioLogin,{servicio:"autenticaSimple",dataObj:JSON.stringify({rctpass:$("#passwordLogin").val(),rctkn:$("#tokenLogin").val(),modoRedirect:"C",flujoOrigen:"std"}),tipoAutenticacion:$("#tipoAutenticacion").val()},"text",function(e){try{if(null!=(e=JSON.parse(e))&&null!=e)if(console.log("processAuthWT: response exists!"),o.auEmpresa=e.status,0==e.code){try{"on"==document.getElementById("flagBehavioWeb").value?(console.log("Sending BehavioWeb Info..."),bw.sendData()):console.log("Flag BehavioWeb off...")}catch(e){console.log("Error sending BehavioWeb info...")}$("#formBanorteId").submit()}else if(console.log("processAuthWT: cancel process!"),console.log('processAuthWT: error message is "'+e.message+'"'),"ENROLL"==e.message)o.showEnrolmentWz();else if("CHALLENGE"==e.message)console.log("processAuthWT: show challenge form!!!"),o.showChallengeForm();else if(e.message&&e.message.indexOf&&0<=e.message.indexOf("SESIONSIMULTANEA==")){console.log("JDLJ: Existing session from another channel!!!");var n=e.message.replace("SESIONSIMULTANEA==",""),t=JSON.parse(n);o.showConcurrentSessionPanel(t.canal,t.fecha,t.hora)}else o.addToolTip(e.message,"#idTooltipPassword"),$("#idTooltipPassword").show();else console.log("Error al procesar respuesta.")}catch(e){console.log("error json")}lockClickedButton=!1},function(e,n,t){console.log("Error auth simple para token celular")})})},processAuthKBA:function(e,n,t){console.log("processAuthKBA: executing function ..."),e.validatePnT(e,n,function(n){var e='{questionId: "'+rtrim($("#questionId").val()+""," ")+'", transactionId: "'+rtrim($("#transactionId").val()+""," ")+'", challengeResponse: "'+rtrim($("#passwordLogin").val()+""," ")+'"}';console.log('$rctpass value is: "'+e+'"'),n.doAjaxS(urlServicioLogin,{servicio:"autenticaSimple",dataObj:JSON.stringify({rctpass:e,rctkn:$("#tokenLogin").val(),modoRedirect:"C",flujoOrigen:"std"}),tipoAutenticacion:$("#tipoAutenticacion").val()},"text",function(e){try{if(null!=(e=JSON.parse(e))&&null!=e)if(console.log("processAuthWT: response exists!"),n.auEmpresa=e.status,0==e.code){try{"on"==document.getElementById("flagBehavioWeb").value?(console.log("Sending BehavioWeb Info..."),bw.sendData()):console.log("Flag BehavioWeb off...")}catch(e){console.log("Error sending BehavioWeb info...")}$("#formBanorteId").submit()}else console.log("processAuthKBA: cancel process!"),console.log('processAuthKBA: error message is "'+e.message+'"'),n.addToolTip(e.message,"#idTooltipPassword"),$("#idTooltipPassword").show();else console.log("Error al procesar respuesta.")}catch(e){console.log("error json")}lockClickedButton=!1},function(e,n,t){console.log("Error auth simple para token celular")})})},getPVars:function(){var e=bmnLgnFParams;""==e.pv1&&e.pv1==e.pv2&&e.pv1==e.pv3||this.loadLoginDiferenciadoBxi(this,e)},loadLoginDiferenciadoBxi:function(e,n){$(".widget_login .layout .login_box .content_box").hide(),$(".widget_login_inside .layout .login_box .content_box").hide(),$(".widget_login .layout .login_box .others_box").hide(),$(".widget_login_inside .layout .login_box .others_box").hide(),""!=n.pv1&&"null"!=n.pv1&&(lightbox("open"),$(".lightbox").css("z-index",90),loadExternalLogin(n.pv4,n.pv1),setTimeout(function(){$(".closePopup:first-child").click()},2222))},showConcurrentSessionPanel:function(e,n,t){var o=this;e?$("#inhibirSesionLabelCanal").text(e):$("#inhibirSesionLabelCanal").text("Canal Banorte"),n?$("#inhibirSesionLabelFecha").text(n):$("#inhibirSesionLabelFecha").text("dd-MM-aaaa"),t?$("#inhibirSesionLabelHora").text(t):$("#inhibirSesionLabelHora").text("hh:mm:ss xm"),$("#pnlInhibirSesion").show(),$("#btnCancelaInhibirSesion").on("click",function(e){console.log("JDLJ cancelar inhibir sesi�n"),$("#btnCancelarloginPassword").click(),o.hideConcurrentSessionPanel()}),$("#btnInhibirSesion").on("click",function(e){console.log("JDLJ inhibir sesi�n simultanea"),o.cierraSesionSimultanea(o,function(){o.hideConcurrentSessionPanel()})}),$("#wpp_login").css("z-index","800"),$("#beginChat").css("z-index","899")},hideConcurrentSessionPanel:function(){$("#pnlInhibirSesion").hide(),$("#btnCancelaInhibirSesion").off(),$("#btnCancelaInhibirSesion").off(),$("#inhibirSesionLabelCanal").text("Canal Banorte"),$("#inhibirSesionLabelFecha").text("dd-MM-aaaa"),$("#inhibirSesionLabelHora").text("hh:mm:ss xm")},cierraSesionSimultanea:function(e,t){e.doAjaxS(urlServicioLogin,{servicio:"inhibirSesionSimultanea",dataObj:"{}"},"text",function(e){console.log(n);try{console.log("JDLJ inhibirSesionSimultanea");var n=JSON.parse(e);console.log(n),t(),$("#btnAceptarloginPasswordAsync").click()}catch(e){console.log("JDLJ Error JSON inhibirSesionSimultanea")}},function(e,n,t){console.log("JDLJ Error inhibirSesionSimultanea")})},showChallengeForm:function(){this.getChallengeQuestion()},getChallengeQuestion:function(){console.log("getChallengeQuestion: executing function ...");var e=$("#userid").val(),n=rtrim((e=(e+"").replace(/["()\=; <>]/gi,""))+""," ");this.doAjaxS(urlServicioLogin,{servicio:"remediacionRiesgo",usuario:n},"json",function(e){console.log("getChallengeQuestion: AJAX response: "+e),null!=e.questionId&&""!=e.questionId?(console.log("getChallengeQuestion: SUCCESS - to load challenge question form"),$(".content_box").hide(),login_goto("login_challenge","homepage",!0,e)):(console.log("getChallengeQuestion: ERROR - no data retrieved"),$("#btnCancelarloginPassword").click())},function(e,n,t){console.log("getChallengeQuestion: thrownError - "+t)})}};var bmnLgnInstance=null,loginDIV=".widget_login",login2DIV=".widget_login_inside",initialHeight=!1;function tabFocusRestrictor(e,n){$(e).blur(function(){$(n).focus()})}function login_goto(o,e,n,i){var t="999";console.log("login_goto: $where: "+o);var a=login2DIV;if(0<$(".widget_login").length&&(a=loginDIV),bmnLgnInstance.widgetDiv=a,$(a+" .content_box").css("opacity","0"),null!=e&&"homepage"==e&&($(a+" .content_box").hide(),$(a+" .others_box").hide()),$(a+" .loading,"+a+" .gif").show().css("opacity","1"),$(a+" .loading,"+a+" .gif").css("opacity","0"),"login_tokenstep1"==o||"login_password"==o||"login_tokenstep2"==o||"login_userblocked"==o||"login_challenge"==o){if("login_tokenstep2"==o?($(a+" .login_box").css("z-index",t).css({width:844,height:425}),$(a+" ."+o).show().css("opacity","1")):"login_password"==o?($(a+" .login_box").css("z-index",t).css("height","400"),bmnLgnInstance.showLoadingMask(!0),$.ajax(contexto+"/jsp/modes/view/loginFormPassword.jsp",{type:"POST",success:function(e,n,t){$("#idFormaVentanaPassword").html(e),$(a+" ."+o).show(),$(a+" ."+o).css("opacity","1"),bmnLgnInstance.showLoadingMask(!1),void 0!==i&&(console.log(i),$("#btnAceptarloginPasswordAsync").show(),$("#btnAceptarloginPassword").hide(),$("#btnAceptarloginPasswordAsync").click(function(e){bmnLgnInstance.processAuthWT(bmnLgnInstance,e,i)}))},dataType:"html"}),n&&($("#idTooltipPassword").html(""),$("#idTooltipPassword").hide(""))):"login_challenge"==o?(console.log("login_challenge: load form"),$(a+" .login_box").css("z-index",t).css("height","400"),bmnLgnInstance.showLoadingMask(!0),$.ajax(contexto+"/jsp/modes/view/loginFormChallenge.jsp",{type:"POST",success:function(e,n,t){$("#idFormaVentanaPassword").html(e),$("#idFormaVentanaPassword").show(),$("#idFormaVentanaPassword").css("opacity","1"),bmnLgnInstance.showLoadingMask(!1),void 0!==i&&(console.log('login_challenge: lngData value is "'+i.questionText+'"'),$("#btnAceptarloginPasswordAsync").show(),$("#btnAceptarloginPassword").hide(),$("#pwdFormContainer div.avatar div.tooltip_area > label").text(i.questionText),$("#questionId").val(i.questionId),$("#transactionId").val(i.transactionId),$("#btnAceptarloginPasswordAsync").click(function(e){bmnLgnInstance.processAuthKBA(bmnLgnInstance,e,i)}))},dataType:"html"}),n&&($("#idTooltipPassword").html(""),$("#idTooltipPassword").hide(""))):($(a+" .login_box").css("z-index",t).css("height","400"),$(a+" ."+o).show().css("opacity","1")),null!=e&&"homepage"==e&&lightbox("open"),"login_tokenstep1"==o){var r="."+o+" #codigoaprobacion";setTimeout(function(){$(r).focus()},100),tabFocusRestrictor(".submenu a",r)}if("login_tokenstep2"==o){r="."+o+" #enter_password";setTimeout(function(){$(r).focus()},100),tabFocusRestrictor("."+o+" button.cancelar + button",r)}if("login_password"==o){r="."+o+" input[type=password]";setTimeout(function(){$(r).focus()},100),tabFocusRestrictor(".submenu a",r)}if("login_userblocked"==o){r="."+o+" button";setTimeout(function(){$(r).focus()},100),tabFocusRestrictor(".submenu a",r)}if("login_challenge"==o){r="."+o+" input[type=password]";setTimeout(function(){$(r).focus()},100),tabFocusRestrictor(".submenu a",r)}}else{function s(){$(a+" .login_box").css("z-index","100").css({height:initialHeight,width:280}),$(a+" ."+o).show().css({opacity:1}),"1"==mostrarSeccionOtrasCuentas?$(a+" .others_box").show():"0"==mostrarSeccionOtrasCuentas?$(a+" .others_box").hide():$(a+" .others_box").show(),bmnLgnInstance.showLoadingMask(!1)}null!=e&&"homepage"==e?lightbox("close",s()):s()}}function select_an_image(){var e=".select_an_image",t=$(e+" .element:first-child").width(),o=$(e+" .element").length,i=e+" .enless",a=0,r=e+" .controls";$(i).width(t*o),$(r+" div").click(function(){var e,n=$(this).attr("data-action");0==$(this).hasClass("disable")&&("right"==(e=n)&&a<o&&(a+=1,$(r+" .rowL").removeClass("disable")),"left"==e&&(a-=1,$(r+" .rowR").removeClass("disable")),a==o-1&&$(r+" .rowR").addClass("disable"),0==a&&$(r+" .rowL").addClass("disable"),$(i).animate({left:a*t*-1}))}),$(i+" .element .avatar").click(function(){var e=$(this).attr("id");$("#input_avatar, #security_phrase").val(e)})}function otherbox(){var n=".widget_login .others_box";$(n).height();$(".widget_login .others_box h1").click(function(){if(1==$(n).hasClass("empresas"))var e=$(n+" iframe").attr("src");1==$(n).hasClass("open")?($(n).animate({height:48},60,"easeOutCubic",function(){$(this).find(".content").hide(),1==$(n).hasClass("empresas")&&$(n+" iframe").prop("src",e)}).removeClass("open"),$(n+" h1").animate({marginTop:0},60,"easeOutCubic")):($(".tooltip").hide(),$(n+" .content").show(),$(n).css("top","auto").css("bottom","0").show().animate({height:"100%"},80,"easeOutCubic").addClass("open"),$(n+" h1").animate({marginTop:50},80,"easeOutCubic"))})}function enterKeyFunctions(){var e="button[type=submit]";$(".login_userblocked").keyup(function(e){console.log("keyup .login_userblocked"),27==e.keyCode&&("undefined"!=typeof $parent&&"homepage"==$parent?login_goto("login_login","homepage"):login_goto("login_login"))}),$(loginDIV+" .login_userblocked button").click(function(){"undefined"!=typeof $parent&&"homepage"==$parent?login_goto("login_login","homepage"):login_goto("login_login")}),$(".login_tokenstep1").keyup(function(e){13==e.keyCode?login_goto("login_tokenstep2","homepage"):27==e.keyCode&&login_goto("login_login","homepage")}),$(loginDIV+" .login_tokenstep1 "+e).click(function(){1==$(this).hasClass("cancelar")?login_goto("login_login","homepage"):login_goto("login_tokenstep2","homepage")}),$(".login_tokenstep2").keyup(function(e){13==e.keyCode?login_goto("login_tokenstep1","homepage"):e.keyCode}),$(loginDIV+" .login_tokenstep2 "+e).click(function(){1==$(this).hasClass("cancelar")&&login_goto("login_login","homepage")})}function regresaInicio(){return"modoSeparado"==modoPortaljs?window.location=actionBackPortalPublico:window.location=actionInicio,!1}function rtrim(e,n){for(i=e.length-1;0<=i;i--)if(n!=e.charAt(i)){e=e.substring(0,i+1);break}return e}function validarEspacios(e,n){for(i=0;i<e.length;i++)return n==e.charAt(i)?"true":"false";return"false"}function validateU(e){5<=$("#userid").val().length?($("#idTooltip").html(""),e()):0==$("#userid").val().length?$("#idTooltip").html("<div class='boxed' ><div class='arrow'></div><div class='content'><p>Escribir su usuario</p></div></div>"):$("#userid").val().length<5&&$("#idTooltip").html("<div class='boxed' ><div class='arrow'></div><div class='content'><p>Formato de usuario inv&aacute;lido</p></div></div>")}function identificarUsuario(e){validateU(function(){bmnLgnInstance.showLoadingMask(!0);var e=$("#userid").val(),n=rtrim((e=(e+"").replace(/["()\=; <>]/gi,""))+""," "),t=rtrim($("#portalOrigen").val()+""," "),o=rtrim($("#rsaDeviceFso").val()+""," "),i=rtrim($("#rsaDevicePrint").val()+""," ");"false"==validarEspacios(n," ")?($("#idBtnEntrar").prop("disabled",!0),"publico"==modoPortaljs?(console.log("redireccion a portal privado. "),console.log("action entrar:"+$("#formBanorteId").attr("action")),$("#formBanorteId").submit()):$.ajax({type:"POST",url:urlServicioLogin,dataType:"json",async:!1,data:{servicio:"identificarUsuario",usuario:n,origen:t,rsaDeviceFso:o,rsaDevicePrint:i},success:function(e){$("#idBtnEntrar").prop("disabled",!1),procesaIdentificarUsuario(e),bmnLgnInstance.showLoadingMask(!1),bmnLgnInstance.isOnRequest=!1},error:function(e,n,t){$("#idBtnEntrar").prop("disabled",!1),bmnLgnInstance.showLoadingMask(!1),bmnLgnInstance.isOnRequest=!1}})):(console.log("hard datos incorrectos"),bmnLgnInstance.showLoadingMask(!1))})}function procesaIdentificarUsuario(e){if("true"==e.success)"datosUsuario"==e.tipoOperacion?"1"==e.datosUsuario.bloqueoNoUso&&($("#customUserId").val(""),$.ajax(contexto+"/jsp/modes/view/usuarioBloqueadoView.jsp",{async:!1,cache:!1,type:"POST",success:function(e,n,t){$("#mensajeBox").show(),$("#mensajeBox").html(e),$("#bancaPersonal").hide()},dataType:"html"})):"identificarUsuario"==e.tipoOperacion&&($(".content_box").hide(),login_goto("login_password","homepage",!0,e));else if("false"==e.success&&"identificarUsuario"==e.tipoOperacion){var n=null!=e.identificarUsuario?e.identificarUsuario.mensajeAUsuario:e.mensaje;bmnLgnInstance.addToolTip(n,"#idTooltip")}return!1}function loadExternalLogin(e,n){console.log("----------------\x3e load external login (homepage)"),console.log(e),console.log(n),$("home"==bmnLgnVista?"div.headline":"div.logo_login").css("display","none"),$("div.login_box").css("height","485px");var t=window.location.pathname.split("!ut"),o=getHost()+t[0];console.log(o);var i=$("<iframe>",{name:"frameExternalApp",id:"frameExternalApp",width:"280",height:"455",border:"0",style:"border:0"});$("#iframeExternalAppContainer").empty().append(i),$("#frameExternalApp").attr("width","280"),$("#frameExternalApp").attr("height","510");var a=$("<form/>",{action:e,method:"post",target:"frameExternalApp",id:"formExternalApp"});a.append($("<input/>",{type:"hidden",value:n,name:"userField",id:"userField"})),a.append($("<input/>",{type:"hidden",value:o,name:"urlPortal",id:"urlPortal"})),"PP_SAT"==bmnLgnPortal&&(a.append($("<input/>",{type:"hidden",value:"<%=LC%>",name:"LC",id:"LC"})),a.append($("<input/>",{type:"hidden",value:"<%=RFC%>",name:"RFC",id:"RFC"})),a.append($("<input/>",{type:"hidden",value:"<%=IM%>",name:"IM",id:"IM"})),a.append($("<input/>",{type:"hidden",value:"<%=ID%>",name:"ID",id:"ID"})),a.append($("<input/>",{type:"hidden",value:"<%=TP%>",name:"TP",id:"TP"})),a.append($("<input/>",{type:"hidden",value:"<%=SH%>",name:"SH",id:"SH"}))),a.append($("<input/>",{type:"submit",value:"Enviar",id:"submitExternalLogin"})),$("#submitExternalLogin").css("display","none"),$("#formExternalAppContainer").empty(),console.log(a),$("#formExternalAppContainer").append(a),$("#formExternalApp").submit(),$("#iframeExternalAppContainer").css("display","inline"),bmnLgnInstance.isHomeViewMode()||($("#iframeExternalAppContainer").css("padding-left","18px"),$("#iframeExternalAppContainer").css("position","absolute"),$("#iframeExternalAppContainer").css("top","-60px"))}function unloadExternalLogin(){$("home"==bmnLgnVista?"div.headline":"div.logo_login").css("display","none"),$("div.login_box").css("height","home"==bmnLgnVista?"362px":"0px"),$("#iframeExternalAppContainer").empty(),$("#iframeExternalAppContainer").removeAttr("style"),$("#iframeExternalAppContainer").css("display","none"),$("#formExternalAppContainer").empty(),$("#formExternalAppContainer").removeAttr("style"),$("#formExternalAppContainer").css("display","none"),$("#idBtnEntrar").prop("disabled",!1),$("#idTooltipPassword").html(""),$errorLogin="",$("#userid").val(""),$("#passwordLogin").val(""),login_goto("login_login","homepage")}function getHost(){var e=window.location.hostname,n=window.location.port,t=window.location.protocol;return null==n||""==n?t+"//"+e:t+"//"+e+":"+n}function setUrlShort(e){var n="",t=(n=""==e?$("#formBanorteId").attr("action"):n).indexOf("Home")+4;n=n.substring(0,t),console.log("urlRetorno: "+n),$("#formBanorteId").attr("action",n)}$(function(){bmnLgnInstance=new BMNLgnCore({hAddr:bmnLgnRsaO1,ctxPath:contexto}),initialHeight=$(loginDIV+" .login_box").height(),$(loginDIV+" .login_login, "+login2DIV+" .login_login").show().css("opacity","1"),select_an_image(),otherbox(),enterKeyFunctions(),bmnLgnInstance.initByViewMode(),bmnLgnInstance.getPVars(),setTimeout(function(){$(".widget_login_inside:gt(0)").remove()},777)});